var Tr=Object.defineProperty;var Nr=(t,e,n)=>e in t?Tr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>Nr(t,typeof e!="symbol"?e+"":e,n);function Qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const R=t=>typeof t=="string",tt=()=>{let t,e;const n=new Promise((s,r)=>{t=s,e=r});return n.resolve=t,n.reject=e,n},qn=t=>t==null?"":""+t,jr=(t,e,n)=>{t.forEach(s=>{e[s]&&(n[s]=e[s])})},Zr=/###/g,Gn=t=>t&&t.indexOf("###")>-1?t.replace(Zr,"."):t,Jn=t=>!t||R(t),dt=(t,e,n)=>{const s=R(e)?e.split("."):e;let r=0;for(;r<s.length-1;){if(Jn(t))return{};const i=Gn(s[r]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++r}return Jn(t)?{}:{obj:t,k:Gn(s[r])}},Yn=(t,e,n)=>{const{obj:s,k:r}=dt(t,e,Object);if(s!==void 0||e.length===1){s[r]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=dt(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=dt(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},Mr=(t,e,n,s)=>{const{obj:r,k:i}=dt(t,e,Object);r[i]=r[i]||[],r[i].push(n)},Tt=(t,e)=>{const{obj:n,k:s}=dt(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},Fr=(t,e,n)=>{const s=Tt(t,n);return s!==void 0?s:Tt(e,n)},er=(t,e,n)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in t?R(t[s])||t[s]instanceof String||R(e[s])||e[s]instanceof String?n&&(t[s]=e[s]):er(t[s],e[s],n):t[s]=e[s]);return t},Ve=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ur={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Vr=t=>R(t)?t.replace(/[&<>"'\/]/g,e=>Ur[e]):t;class Br{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Wr=[" ",",","?","!",";"],Hr=new Br(20),Kr=(t,e,n)=>{e=e||"",n=n||"";const s=Wr.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(s.length===0)return!0;const r=Hr.getRegExp(`(${s.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!r.test(t);if(!i){const o=t.indexOf(n);o>0&&!r.test(t.substring(0,o))&&(i=!0)}return i},_n=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const s=e.split(n);let r=t;for(let i=0;i<s.length;){if(!r||typeof r!="object")return;let o,a="";for(let u=i;u<s.length;++u)if(u!==i&&(a+=n),a+=s[u],o=r[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<s.length-1)continue;i+=u-i+1;break}r=o}return r},gt=t=>t==null?void 0:t.replace("_","-"),qr={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,s;(s=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||s.call(n,console,e)}};class Nt{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||qr,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,s,r){return r&&!this.debug?null:(R(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Nt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Nt(this.logger,e)}}var ye=new Nt;class Kt{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(n)||0;this.observers[s].set(n,r+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,i])=>{for(let o=0;o<i;o++)r(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,i])=>{for(let o=0;o<i;o++)r.apply(r,[e,...n])})}}class Xn extends Kt{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,s,r={}){var l,g;const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,o=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],s&&(Array.isArray(s)?a.push(...s):R(s)&&i?a.push(...s.split(i)):a.push(s)));const u=Tt(this.data,a);return!u&&!n&&!s&&e.indexOf(".")>-1&&(e=a[0],n=a[1],s=a.slice(2).join(".")),u||!o||!R(s)?u:_n((g=(l=this.data)==null?void 0:l[e])==null?void 0:g[n],s,i)}addResource(e,n,s,r,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];s&&(a=a.concat(o?s.split(o):s)),e.indexOf(".")>-1&&(a=e.split("."),r=n,n=a[1]),this.addNamespaces(n),Yn(this.data,a,r),i.silent||this.emit("added",e,n,s,r)}addResources(e,n,s,r={silent:!1}){for(const i in s)(R(s[i])||Array.isArray(s[i]))&&this.addResource(e,n,i,s[i],{silent:!0});r.silent||this.emit("added",e,n,s)}addResourceBundle(e,n,s,r,i,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),r=s,s=n,n=a[1]),this.addNamespaces(n);let u=Tt(this.data,a)||{};o.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?er(u,s,i):u={...u,...s},Yn(this.data,a,u),o.silent||this.emit("added",e,n,s)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var tr={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,s,r){return t.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,n,s,r))??e}),e}};const Qn={},es=t=>!R(t)&&typeof t!="boolean"&&typeof t!="number";class jt extends Kt{constructor(e,n={}){super(),jr(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ye.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const s={...n};if(e==null)return!1;const r=this.resolve(e,s);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=s&&e.indexOf(s)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Kr(e,s,r);if(o&&!a){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:R(i)?[i]:i};const l=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(l[0])>-1)&&(i=l.shift()),e=l.join(r)}return{key:e,namespaces:R(i)?[i]:i}}translate(e,n,s){let r=typeof n=="object"?{...n}:n;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:u}=this.extractFromKey(e[e.length-1],r),l=u[u.length-1];let g=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const d=r.lng||this.language,k=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode")return k?i?{res:`${l}${g}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${g}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:a;const p=this.resolve(e,r);let c=p==null?void 0:p.res;const h=(p==null?void 0:p.usedKey)||a,m=(p==null?void 0:p.exactUsedKey)||a,f=["[object Number]","[object Function]","[object RegExp]"],w=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,I=r.count!==void 0&&!R(r.count),G=jt.hasDefaultValue(r),E=I?this.pluralResolver.getSuffix(d,r.count,r):"",C=r.ordinal&&I?this.pluralResolver.getSuffix(d,r.count,{ordinal:!1}):"",T=I&&!r.ordinal&&r.count===0,D=T&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${E}`]||r[`defaultValue${C}`]||r.defaultValue;let j=c;y&&!c&&G&&(j=D);const se=es(j),ae=Object.prototype.toString.apply(j);if(y&&j&&se&&f.indexOf(ae)<0&&!(R(w)&&Array.isArray(j))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,j,{...r,ns:u}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(p.res=P,p.usedParams=this.getUsedParamsDetails(r),p):P}if(o){const P=Array.isArray(j),V=P?[]:{},Y=P?m:h;for(const Q in j)if(Object.prototype.hasOwnProperty.call(j,Q)){const re=`${Y}${o}${Q}`;G&&!c?V[Q]=this.translate(re,{...r,defaultValue:es(D)?D[Q]:void 0,joinArrays:!1,ns:u}):V[Q]=this.translate(re,{...r,joinArrays:!1,ns:u}),V[Q]===re&&(V[Q]=j[Q])}c=V}}else if(y&&R(w)&&Array.isArray(c))c=c.join(w),c&&(c=this.extendTranslation(c,e,r,s));else{let P=!1,V=!1;!this.isValidLookup(c)&&G&&(P=!0,c=D),this.isValidLookup(c)||(V=!0,c=a);const Q=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:c,re=G&&D!==c&&this.options.updateMissing;if(V||P||re){if(this.logger.log(re?"updateKey":"missingKey",d,l,a,re?D:c),o){const pe=this.resolve(a,{...r,keySeparator:!1});pe&&pe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let te=[];const Ce=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ce&&Ce[0])for(let pe=0;pe<Ce.length;pe++)te.push(Ce[pe]);else this.options.saveMissingTo==="all"?te=this.languageUtils.toResolveHierarchy(r.lng||this.language):te.push(r.lng||this.language);const Wn=(pe,Te,et)=>{var Kn;const Hn=G&&et!==c?et:Q;this.options.missingKeyHandler?this.options.missingKeyHandler(pe,l,Te,Hn,re,r):(Kn=this.backendConnector)!=null&&Kn.saveMissing&&this.backendConnector.saveMissing(pe,l,Te,Hn,re,r),this.emit("missingKey",pe,l,Te,c)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?te.forEach(pe=>{const Te=this.pluralResolver.getSuffixes(pe,r);T&&r[`defaultValue${this.options.pluralSeparator}zero`]&&Te.indexOf(`${this.options.pluralSeparator}zero`)<0&&Te.push(`${this.options.pluralSeparator}zero`),Te.forEach(et=>{Wn([pe],a+et,r[`defaultValue${et}`]||D)})}):Wn(te,a,D))}c=this.extendTranslation(c,e,r,p,s),V&&c===a&&this.options.appendNamespaceToMissingKey&&(c=`${l}${g}${a}`),(V||P)&&this.options.parseMissingKeyHandler&&(c=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${g}${a}`:a,P?c:void 0,r))}return i?(p.res=c,p.usedParams=this.getUsedParamsDetails(r),p):c}extendTranslation(e,n,s,r,i){var u,l;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const g=R(e)&&(((l=s==null?void 0:s.interpolation)==null?void 0:l.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(g){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let k=s.replace&&!R(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(k={...this.options.interpolation.defaultVariables,...k}),e=this.interpolator.interpolate(e,k,s.lng||this.language||r.usedLng,s),g){const p=e.match(this.interpolator.nestingRegexp),c=p&&p.length;d<c&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(i==null?void 0:i[0])===p[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,a=R(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&s.applyPostProcessor!==!1&&(e=tr.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,n={}){let s,r,i,o,a;return R(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(s))return;const l=this.extractFromKey(u,n),g=l.key;r=g;let d=l.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const k=n.count!==void 0&&!R(n.count),p=k&&!n.ordinal&&n.count===0,c=n.context!==void 0&&(R(n.context)||typeof n.context=="number")&&n.context!=="",h=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(m=>{var f,w;this.isValidLookup(s)||(a=m,!Qn[`${h[0]}-${m}`]&&((f=this.utils)!=null&&f.hasLoadedNamespace)&&!((w=this.utils)!=null&&w.hasLoadedNamespace(a))&&(Qn[`${h[0]}-${m}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(y=>{var E;if(this.isValidLookup(s))return;o=y;const I=[g];if((E=this.i18nFormat)!=null&&E.addLookupKeys)this.i18nFormat.addLookupKeys(I,g,y,m,n);else{let C;k&&(C=this.pluralResolver.getSuffix(y,n.count,n));const T=`${this.options.pluralSeparator}zero`,D=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(k&&(I.push(g+C),n.ordinal&&C.indexOf(D)===0&&I.push(g+C.replace(D,this.options.pluralSeparator)),p&&I.push(g+T)),c){const j=`${g}${this.options.contextSeparator}${n.context}`;I.push(j),k&&(I.push(j+C),n.ordinal&&C.indexOf(D)===0&&I.push(j+C.replace(D,this.options.pluralSeparator)),p&&I.push(j+T))}}let G;for(;G=I.pop();)this.isValidLookup(s)||(i=G,s=this.getResource(y,m,G,n))}))})}),{res:s,usedKey:r,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,s,r={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,s,r):this.resourceStore.getResource(e,n,s,r)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!R(e.replace);let r=s?e.replace:e;if(s&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const i of n)delete r[i]}return r}static hasDefaultValue(e){const n="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n===s.substring(0,n.length)&&e[s]!==void 0)return!0;return!1}}class ts{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ye.create("languageUtils")}getScriptPartFromCode(e){if(e=gt(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=gt(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(R(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(s=>{if(n)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&e.forEach(s=>{if(n)return;const r=this.getScriptPartFromCode(s);if(this.isSupportedCode(r))return n=r;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),R(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let s=e[n];return s||(s=e[this.getScriptPartFromCode(n)]),s||(s=e[this.formatLanguageCode(n)]),s||(s=e[this.getLanguagePartFromCode(n)]),s||(s=e.default),s||[]}toResolveHierarchy(e,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),r=[],i=o=>{o&&(this.isSupportedCode(o)?r.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return R(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):R(e)&&i(this.formatLanguageCode(e)),s.forEach(o=>{r.indexOf(o)<0&&i(this.formatLanguageCode(o))}),r}}const ns={zero:0,one:1,two:2,few:3,many:4,other:5},ss={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Gr{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ye.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const s=gt(e==="dev"?"en":e),r=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(s,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ss;if(!e.match(/-|_/))return ss;const u=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(u,n)}return this.pluralRulesCache[i]=o,o}needsPlural(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,s={}){return this.getSuffixes(e,s).map(r=>`${n}${r}`)}getSuffixes(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((r,i)=>ns[r]-ns[i]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,n,s={}){const r=this.getRule(e,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,s))}}const rs=(t,e,n,s=".",r=!0)=>{let i=Fr(t,e,n);return!i&&r&&R(n)&&(i=_n(t,n,s),i===void 0&&(i=_n(e,n,s))),i},nn=t=>t.replace(/\$/g,"$$$$");class Jr{constructor(e={}){var n;this.logger=ye.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(s=>s),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:r,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:u,formatSeparator:l,unescapeSuffix:g,unescapePrefix:d,nestingPrefix:k,nestingPrefixEscaped:p,nestingSuffix:c,nestingSuffixEscaped:h,nestingOptionsSeparator:m,maxReplaces:f,alwaysFormat:w}=e.interpolation;this.escape=n!==void 0?n:Vr,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?Ve(i):o||"{{",this.suffix=a?Ve(a):u||"}}",this.formatSeparator=l||",",this.unescapePrefix=g?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=k?Ve(k):p||Ve("$t("),this.nestingSuffix=c?Ve(c):h||Ve(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=f||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,s)=>(n==null?void 0:n.source)===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,s,r){var p;let i,o,a;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=c=>{if(c.indexOf(this.formatSeparator)<0){const w=rs(n,u,c,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,s,{...r,...n,interpolationkey:c}):w}const h=c.split(this.formatSeparator),m=h.shift().trim(),f=h.join(this.formatSeparator).trim();return this.format(rs(n,u,m,this.options.keySeparator,this.options.ignoreJSONStructure),f,s,{...r,...n,interpolationkey:m})};this.resetRegExp();const g=(r==null?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=((p=r==null?void 0:r.interpolation)==null?void 0:p.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:c=>nn(c)},{regex:this.regexp,safeValue:c=>this.escapeValue?nn(this.escape(c)):nn(c)}].forEach(c=>{for(a=0;i=c.regex.exec(e);){const h=i[1].trim();if(o=l(h),o===void 0)if(typeof g=="function"){const f=g(e,i,r);o=R(f)?f:""}else if(r&&Object.prototype.hasOwnProperty.call(r,h))o="";else if(d){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${h} for interpolating ${e}`),o="";else!R(o)&&!this.useRawValueToEscape&&(o=qn(o));const m=c.safeValue(o);if(e=e.replace(i[0],m),d?(c.regex.lastIndex+=o.length,c.regex.lastIndex-=i[0].length):c.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,s={}){let r,i,o;const a=(u,l)=>{const g=this.nestingOptionsSeparator;if(u.indexOf(g)<0)return u;const d=u.split(new RegExp(`${g}[ ]*{`));let k=`{${d[1]}`;u=d[0],k=this.interpolate(k,o);const p=k.match(/'/g),c=k.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!c||c.length%2!==0)&&(k=k.replace(/'/g,'"'));try{o=JSON.parse(k),l&&(o={...l,...o})}catch(h){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,h),`${u}${g}${k}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;r=this.nestingRegexp.exec(e);){let u=[];o={...s},o=o.replace&&!R(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(l!==-1&&(u=r[1].slice(l).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),i=n(a.call(this,r[1].trim(),o),o),i&&r[0]===e&&!R(i))return i;R(i)||(i=qn(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),u.length&&(i=u.reduce((g,d)=>this.format(g,d,s.lng,{...s,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const Yr=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const s=t.split("(");e=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);e==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(o=>{if(o){const[a,...u]=o.split(":"),l=u.join(":").trim().replace(/^'+|'+$/g,""),g=a.trim();n[g]||(n[g]=l),l==="false"&&(n[g]=!1),l==="true"&&(n[g]=!0),isNaN(l)||(n[g]=parseInt(l,10))}})}return{formatName:e,formatOptions:n}},is=t=>{const e={};return(n,s,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const o=s+JSON.stringify(i);let a=e[o];return a||(a=t(gt(s),r),e[o]=a),a(n)}},Xr=t=>(e,n,s)=>t(gt(n),s)(e);class Qr{constructor(e={}){this.logger=ye.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?is:Xr;this.formats={number:s((r,i)=>{const o=new Intl.NumberFormat(r,{...i});return a=>o.format(a)}),currency:s((r,i)=>{const o=new Intl.NumberFormat(r,{...i,style:"currency"});return a=>o.format(a)}),datetime:s((r,i)=>{const o=new Intl.DateTimeFormat(r,{...i});return a=>o.format(a)}),relativetime:s((r,i)=>{const o=new Intl.RelativeTimeFormat(r,{...i});return a=>o.format(a,i.range||"day")}),list:s((r,i)=>{const o=new Intl.ListFormat(r,{...i});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=is(n)}format(e,n,s,r={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(u=>u.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,u)=>{var d;const{formatName:l,formatOptions:g}=Yr(u);if(this.formats[l]){let k=a;try{const p=((d=r==null?void 0:r.formatParams)==null?void 0:d[r.interpolationkey])||{},c=p.locale||p.lng||r.locale||r.lng||s;k=this.formats[l](a,c,{...g,...r,...p})}catch(p){this.logger.warn(p)}return k}else this.logger.warn(`there was no format function for ${l}`);return a},e)}}const ei=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class ti extends Kt{constructor(e,n,s,r={}){var i,o;super(),this.backend=e,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=ye.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,s,r.backend,r)}queueLoad(e,n,s,r){const i={},o={},a={},u={};return e.forEach(l=>{let g=!0;n.forEach(d=>{const k=`${l}|${d}`;!s.reload&&this.store.hasResourceBundle(l,d)?this.state[k]=2:this.state[k]<0||(this.state[k]===1?o[k]===void 0&&(o[k]=!0):(this.state[k]=1,g=!1,o[k]===void 0&&(o[k]=!0),i[k]===void 0&&(i[k]=!0),u[d]===void 0&&(u[d]=!0)))}),g||(a[l]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(u)}}loaded(e,n,s){const r=e.split("|"),i=r[0],o=r[1];n&&this.emit("failedLoading",i,o,n),!n&&s&&this.store.addResourceBundle(i,o,s,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&s&&(this.state[e]=0);const a={};this.queue.forEach(u=>{Mr(u.loaded,[i],o),ei(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(l=>{a[l]||(a[l]={});const g=u.loaded[l];g.length&&g.forEach(d=>{a[l][d]===void 0&&(a[l][d]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(u=>!u.done)}read(e,n,s,r=0,i=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:s,tried:r,wait:i,callback:o});return}this.readingCalls++;const a=(l,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(l&&g&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,s,r+1,i*2,o)},i);return}o(l,g)},u=this.backend[s].bind(this.backend);if(u.length===2){try{const l=u(e,n);l&&typeof l.then=="function"?l.then(g=>a(null,g)).catch(a):a(null,l)}catch(l){a(l)}return}return u(e,n,a)}prepareLoading(e,n,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();R(e)&&(e=this.languageUtils.toResolveHierarchy(e)),R(n)&&(n=[n]);const i=this.queueLoad(e,n,s,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,s){this.prepareLoading(e,n,{},s)}reload(e,n,s){this.prepareLoading(e,n,{reload:!0},s)}loadOne(e,n=""){const s=e.split("|"),r=s[0],i=s[1];this.read(r,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${r} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${r}`,a),this.loaded(e,o,a)})}saveMissing(e,n,s,r,i,o={},a=()=>{}){var u,l,g,d,k;if((l=(u=this.services)==null?void 0:u.utils)!=null&&l.hasLoadedNamespace&&!((d=(g=this.services)==null?void 0:g.utils)!=null&&d.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((k=this.backend)!=null&&k.create){const p={...o,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let h;c.length===5?h=c(e,n,s,r,p):h=c(e,n,s,r),h&&typeof h.then=="function"?h.then(m=>a(null,m)).catch(a):a(null,h)}catch(h){a(h)}else c(e,n,s,r,a,p)}!e||!e[0]||this.store.addResource(e[0],n,s,r)}}}const os=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),R(t[1])&&(e.defaultValue=t[1]),R(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(s=>{e[s]=n[s]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),as=t=>{var e,n;return R(t.ns)&&(t.ns=[t.ns]),R(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),R(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},St=()=>{},ni=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class mt extends Kt{constructor(e={},n){if(super(),this.options=as(e),this.services={},this.logger=ye,this.modules={external:[]},ni(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(R(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=os();this.options={...s,...this.options,...as(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=l=>l?typeof l=="function"?new l:l:null;if(!this.options.isClone){this.modules.logger?ye.init(r(this.modules.logger),this.options):ye.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:l=Qr;const g=new ts(this.options);this.store=new Xn(this.options.resources,this.options);const d=this.services;d.logger=ye,d.resourceStore=this.store,d.languageUtils=g,d.pluralResolver=new Gr(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(d.formatter=r(l),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Jr(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new ti(r(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(k,...p)=>{this.emit(k,...p)}),this.modules.languageDetector&&(d.languageDetector=r(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=r(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new jt(this.services,this.options),this.translator.on("*",(k,...p)=>{this.emit(k,...p)}),this.modules.external.forEach(k=>{k.init&&k.init(this)})}if(this.format=this.options.interpolation.format,n||(n=St),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=(...g)=>this.store[l](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=(...g)=>(this.store[l](...g),this)});const a=tt(),u=()=>{const l=(g,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),n(g,d)};if(this.languages&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),a}loadResources(e,n=St){var i,o;let s=n;const r=R(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if((r==null?void 0:r.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const a=[],u=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&a.indexOf(d)<0&&a.push(d)})};r?u(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>u(g)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,l=>u(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(l)})}else s(null)}reloadResources(e,n,s){const r=tt();return typeof e=="function"&&(s=e,e=void 0),typeof n=="function"&&(s=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),s||(s=St),this.services.backendConnector.reload(e,n,i=>{r.resolve(),s(i)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&tr.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const s=tt();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,u)=>{u?this.isLanguageChangingTo===e&&(r(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,s.resolve((...l)=>this.t(...l)),n&&n(a,(...l)=>this.t(...l))},o=a=>{var g,d;!e&&!a&&this.services.languageDetector&&(a=[]);const u=R(a)?a:a&&a[0],l=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(R(a)?[a]:a);l&&(this.language||r(l),this.translator.language||this.translator.changeLanguage(l),(d=(g=this.services.languageDetector)==null?void 0:g.cacheUserLanguage)==null||d.call(g,l)),this.loadResources(l,k=>{i(k,l)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),s}getFixedT(e,n,s){const r=(i,o,...a)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([i,o].concat(a)):u={...o},u.lng=u.lng||r.lng,u.lngs=u.lngs||r.lngs,u.ns=u.ns||r.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||s||r.keyPrefix);const l=this.options.keySeparator||".";let g;return u.keyPrefix&&Array.isArray(i)?g=i.map(d=>`${u.keyPrefix}${l}${d}`):g=u.keyPrefix?`${u.keyPrefix}${l}${i}`:i,this.t(g,u)};return R(e)?r.lng=e:r.lngs=e,r.ns=n,r.keyPrefix=s,r}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(a,u)=>{const l=this.services.backendConnector.state[`${a}|${u}`];return l===-1||l===0||l===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(s,e)&&(!r||o(i,e)))}loadNamespaces(e,n){const s=tt();return this.options.ns?(R(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),n&&n(r)}),s):(n&&n(),Promise.resolve())}loadLanguages(e,n){const s=tt();R(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(o=>r.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=r.concat(i),this.loadResources(o=>{s.resolve(),n&&n(o)}),s):(n&&n(),Promise.resolve())}dir(e){var r,i;if(e||(e=this.resolvedLanguage||(((r=this.languages)==null?void 0:r.length)>0?this.languages[0]:this.language)),!e)return"rtl";if(Intl.Locale){const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((i=this.services)==null?void 0:i.languageUtils)||new ts(os());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new mt(e,n)}cloneInstance(e={},n=St){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new mt(r);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const a=Object.keys(this.store.data).reduce((u,l)=>(u[l]={...this.store.data[l]},u[l]=Object.keys(u[l]).reduce((g,d)=>(g[d]={...u[l][d]},g),u[l]),u),{});i.store=new Xn(a,r),i.services.resourceStore=i.store}return i.translator=new jt(i.services,r),i.translator.on("*",(a,...u)=>{i.emit(a,...u)}),i.init(r,n),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ne=mt.createInstance();ne.createInstance=mt.createInstance;ne.createInstance;ne.dir;ne.init;ne.loadResources;ne.reloadResources;ne.use;ne.changeLanguage;ne.getFixedT;ne.t;ne.exists;ne.setDefaultNamespace;ne.hasLoadedNamespace;ne.loadNamespaces;ne.loadLanguages;function cs(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"}var Rt={exports:{}},si=Rt.exports,us;function ri(){return us||(us=1,function(t,e){(function(n,s){s(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:si,function(n){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)n.exports=globalThis.browser;else{const s="The message port closed before a response was received.",r=i=>{const o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(C,T=void 0){super(T),this.createItem=C}get(C){return this.has(C)||this.set(C,this.createItem(C)),super.get(C)}}const u=E=>E&&typeof E=="object"&&typeof E.then=="function",l=(E,C)=>(...T)=>{i.runtime.lastError?E.reject(new Error(i.runtime.lastError.message)):C.singleCallbackArg||T.length<=1&&C.singleCallbackArg!==!1?E.resolve(T[0]):E.resolve(T)},g=E=>E==1?"argument":"arguments",d=(E,C)=>function(D,...j){if(j.length<C.minArgs)throw new Error(`Expected at least ${C.minArgs} ${g(C.minArgs)} for ${E}(), got ${j.length}`);if(j.length>C.maxArgs)throw new Error(`Expected at most ${C.maxArgs} ${g(C.maxArgs)} for ${E}(), got ${j.length}`);return new Promise((se,ae)=>{if(C.fallbackToNoCallback)try{D[E](...j,l({resolve:se,reject:ae},C))}catch(P){console.warn(`${E} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,P),D[E](...j),C.fallbackToNoCallback=!1,C.noCallback=!0,se()}else C.noCallback?(D[E](...j),se()):D[E](...j,l({resolve:se,reject:ae},C))})},k=(E,C,T)=>new Proxy(C,{apply(D,j,se){return T.call(j,E,...se)}});let p=Function.call.bind(Object.prototype.hasOwnProperty);const c=(E,C={},T={})=>{let D=Object.create(null),j={has(ae,P){return P in E||P in D},get(ae,P,V){if(P in D)return D[P];if(!(P in E))return;let Y=E[P];if(typeof Y=="function")if(typeof C[P]=="function")Y=k(E,E[P],C[P]);else if(p(T,P)){let Q=d(P,T[P]);Y=k(E,E[P],Q)}else Y=Y.bind(E);else if(typeof Y=="object"&&Y!==null&&(p(C,P)||p(T,P)))Y=c(Y,C[P],T[P]);else if(p(T,"*"))Y=c(Y,C[P],T["*"]);else return Object.defineProperty(D,P,{configurable:!0,enumerable:!0,get(){return E[P]},set(Q){E[P]=Q}}),Y;return D[P]=Y,Y},set(ae,P,V,Y){return P in D?D[P]=V:E[P]=V,!0},defineProperty(ae,P,V){return Reflect.defineProperty(D,P,V)},deleteProperty(ae,P){return Reflect.deleteProperty(D,P)}},se=Object.create(E);return new Proxy(se,j)},h=E=>({addListener(C,T,...D){C.addListener(E.get(T),...D)},hasListener(C,T){return C.hasListener(E.get(T))},removeListener(C,T){C.removeListener(E.get(T))}}),m=new a(E=>typeof E!="function"?E:function(T){const D=c(T,{},{getContent:{minArgs:0,maxArgs:0}});E(D)}),f=new a(E=>typeof E!="function"?E:function(T,D,j){let se=!1,ae,P=new Promise(re=>{ae=function(te){se=!0,re(te)}}),V;try{V=E(T,D,ae)}catch(re){V=Promise.reject(re)}const Y=V!==!0&&u(V);if(V!==!0&&!Y&&!se)return!1;const Q=re=>{re.then(te=>{j(te)},te=>{let Ce;te&&(te instanceof Error||typeof te.message=="string")?Ce=te.message:Ce="An unexpected error occurred",j({__mozWebExtensionPolyfillReject__:!0,message:Ce})}).catch(te=>{console.error("Failed to send onMessage rejected reply",te)})};return Q(Y?V:P),!0}),w=({reject:E,resolve:C},T)=>{i.runtime.lastError?i.runtime.lastError.message===s?C():E(new Error(i.runtime.lastError.message)):T&&T.__mozWebExtensionPolyfillReject__?E(new Error(T.message)):C(T)},y=(E,C,T,...D)=>{if(D.length<C.minArgs)throw new Error(`Expected at least ${C.minArgs} ${g(C.minArgs)} for ${E}(), got ${D.length}`);if(D.length>C.maxArgs)throw new Error(`Expected at most ${C.maxArgs} ${g(C.maxArgs)} for ${E}(), got ${D.length}`);return new Promise((j,se)=>{const ae=w.bind(null,{resolve:j,reject:se});D.push(ae),T.sendMessage(...D)})},I={devtools:{network:{onRequestFinished:h(m)}},runtime:{onMessage:h(f),onMessageExternal:h(f),sendMessage:y.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:y.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},G={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":G},services:{"*":G},websites:{"*":G}},c(i,I,o)};n.exports=r(chrome)}})}(Rt)),Rt.exports}var ii=ri();const M=Qs(ii);class he{constructor(){Z(this,"available",!1);Z(this,"bootResolve");Z(this,"bootReject");Z(this,"bootPromise");this.bootResolve=()=>{},this.bootReject=()=>{},this.bootPromise=new Promise((e,n)=>{this.bootResolve=()=>{this.available=!0,e()},this.bootReject=()=>{this.available=!1,n(new Error("boot error ServiceEntity"))}})}}class oi extends he{constructor(){super();Z(this,"messageMap",new Map);Z(this,"popupPort",null);M.runtime.onConnect.addListener(this.longLivedMessageHandler.bind(this)),M.runtime.onMessage.addListener(this.tabMessageHandler.bind(this))}async boot(){this.bootResolve(),await this.bootPromise}longLivedMessageHandler(n){this.popupPort=n,n.onMessage.addListener(s=>{if(cs(s)){const r=this.messageMap.get(s.type);r&&this.bootPromise.then(()=>r(s.data)).then(i=>{n.postMessage({id:s.id,...i})}).catch(()=>{})}}),n.onDisconnect.addListener(()=>{this.popupPort=null})}subscribe(n){Object.entries(n).forEach(([r,i])=>{if(this.messageMap.has(r))throw Error(`MessageService: subscribe already has ${r} handler`);this.messageMap.set(r,i)})}notifyPopup(n){var s;(s=this.popupPort)==null||s.postMessage(n)}async tabMessageHandler(n,s){var r;if(cs(n)){const i=this.messageMap.get(n.type);if(i){await this.bootPromise;const o=await i(n.data),a=(r=s.tab)==null?void 0:r.id;a&&await M.tabs.sendMessage(a,{id:n.id,...o})}}}notifyTab(n,s){Promise.resolve(this).catch(()=>{}),s?M.tabs.sendMessage(s,n).catch(()=>{}):M.tabs.query({}).then(r=>{r.forEach(i=>{i.id&&M.tabs.sendMessage(i.id,n).catch(()=>{})})}).catch(()=>{})}}const Gh=new oi;function v(t,e,n){function s(a,u){var l;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(l=a._zod).traits??(l.traits=new Set),a._zod.traits.add(t),e(a,u);for(const g in o.prototype)g in a||Object.defineProperty(a,g,{value:o.prototype[g].bind(a)});a._zod.constr=o,a._zod.def=u}const r=(n==null?void 0:n.Parent)??Object;class i extends r{}Object.defineProperty(i,"name",{value:t});function o(a){var u;const l=n!=null&&n.Parent?new i:this;s(l,a),(u=l._zod).deferred??(u.deferred=[]);for(const g of l._zod.deferred)g();return l}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var u,l;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(l=(u=a==null?void 0:a._zod)==null?void 0:u.traits)==null?void 0:l.has(t)}}),Object.defineProperty(o,"name",{value:t}),o}class bt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const nr={};function Re(t){return nr}function ai(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,r])=>e.indexOf(+s)===-1).map(([s,r])=>r)}function ci(t,e){return typeof e=="bigint"?e.toString():e}function sr(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Ln(t){return t==null}function Dn(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function ui(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,i=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return i%o/10**r}function H(t,e,n){Object.defineProperty(t,e,{get(){{const s=n();return t[e]=s,s}},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Tn(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function rr(t=10){const e="abcdefghijklmnopqrstuvwxyz";let n="";for(let s=0;s<t;s++)n+=e[Math.floor(Math.random()*e.length)];return n}function nt(t){return JSON.stringify(t)}const ir=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Sn(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const li=sr(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function An(t){if(Sn(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Sn(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const hi=new Set(["string","number","symbol"]);function xt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ue(t,e,n){const s=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(s._zod.parent=t),s}function O(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function di(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const pi={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function fi(t,e){const n={},s=t._zod.def;for(const r in e){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);e[r]&&(n[r]=s.shape[r])}return Ue(t,{...t._zod.def,shape:n,checks:[]})}function gi(t,e){const n={...t._zod.def.shape},s=t._zod.def;for(const r in e){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);e[r]&&delete n[r]}return Ue(t,{...t._zod.def,shape:n,checks:[]})}function mi(t,e){const n={...t._zod.def,get shape(){const s={...t._zod.def.shape,...e};return Tn(this,"shape",s),s},checks:[]};return Ue(t,n)}function bi(t,e){return Ue(t,{...t._zod.def,get shape(){const n={...t._zod.def.shape,...e._zod.def.shape};return Tn(this,"shape",n),n},catchall:e._zod.def.catchall,checks:[]})}function vi(t,e,n){const s=e._zod.def.shape,r={...s};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(r[i]=t?new t({type:"optional",innerType:s[i]}):s[i])}else for(const i in s)r[i]=t?new t({type:"optional",innerType:s[i]}):s[i];return Ue(e,{...e._zod.def,shape:r,checks:[]})}function wi(t,e,n){const s=e._zod.def.shape,r={...s};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(r[i]=new t({type:"nonoptional",innerType:s[i]}))}else for(const i in s)r[i]=new t({type:"nonoptional",innerType:s[i]});return Ue(e,{...e._zod.def,shape:r,checks:[]})}function pt(t,e=0){for(let n=e;n<t.issues.length;n++)if(t.issues[n].continue!==!0)return!0;return!1}function Fe(t,e){return e.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(t),n})}function At(t){return typeof t=="string"?t:t==null?void 0:t.message}function ze(t,e,n){var r,i,o,a,u,l;const s={...t,path:t.path??[]};if(!t.message){const g=At((o=(i=(r=t.inst)==null?void 0:r._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,t))??At((a=e==null?void 0:e.error)==null?void 0:a.call(e,t))??At((u=n.customError)==null?void 0:u.call(n,t))??At((l=n.localeError)==null?void 0:l.call(n,t))??"Invalid input";s.message=g}return delete s.inst,delete s.continue,e!=null&&e.reportInput||delete s.input,s}function Nn(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function vt(...t){const[e,n,s]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:s}:{...e}}const or=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,ci,2)},enumerable:!0})},ar=v("$ZodError",or),cr=v("$ZodError",or,{Parent:Error});function jn(t,e=n=>n.message){const n={},s=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}function yi(t,e){const n=e||function(i){return i.message},s={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>r({issues:a}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)s._errors.push(n(o));else{let a=s,u=0;for(;u<o.path.length;){const l=o.path[u];u===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],u++}}};return r(t),s}const xi=t=>(e,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new bt;if(o.issues.length){const a=new((r==null?void 0:r.Err)??t)(o.issues.map(u=>ze(u,i,Re())));throw ir(a,r==null?void 0:r.callee),a}return o.value},_i=t=>async(e,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((r==null?void 0:r.Err)??t)(o.issues.map(u=>ze(u,i,Re())));throw ir(a,r==null?void 0:r.callee),a}return o.value},ur=t=>(e,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new bt;return i.issues.length?{success:!1,error:new(t??ar)(i.issues.map(o=>ze(o,r,Re())))}:{success:!0,data:i.value}},Si=ur(cr),lr=t=>async(e,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>ze(o,r,Re())))}:{success:!0,data:i.value}},Ai=lr(cr),ki=/^[cC][^\s-]{8,}$/,Ci=/^[0-9a-z]+$/,Ei=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ii=/^[0-9a-vA-V]{20}$/,Oi=/^[A-Za-z0-9]{27}$/,$i=/^[a-zA-Z0-9_-]{21}$/,Pi=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ri=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ls=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,zi=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Li="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Di(){return new RegExp(Li,"u")}const Ti=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ni=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,ji=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Zi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Mi=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,hr=/^[A-Za-z0-9_-]*$/,Fi=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Ui=/^\+(?:[0-9]){6,14}[0-9]$/,dr="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Vi=new RegExp(`^${dr}$`);function pr(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Bi(t){return new RegExp(`^${pr(t)}$`)}function Wi(t){const e=pr({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-]\\d{2}:\\d{2})");const s=`${e}(?:${n.join("|")})`;return new RegExp(`^${dr}T(?:${s})$`)}const Hi=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Ki=/^\d+$/,qi=/^-?\d+(?:\.\d+)?/i,Gi=/true|false/i,Ji=/^[^A-Z]*$/,Yi=/^[^a-z]*$/,de=v("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),fr={number:"number",bigint:"bigint",object:"date"},gr=v("$ZodCheckLessThan",(t,e)=>{de.init(t,e);const n=fr[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?r.maximum=e.value:r.exclusiveMaximum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:n,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),mr=v("$ZodCheckGreaterThan",(t,e)=>{de.init(t,e);const n=fr[typeof e.value];t._zod.onattach.push(s=>{const r=s._zod.bag,i=(e.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?r.minimum=e.value:r.exclusiveMinimum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:n,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Xi=v("$ZodCheckMultipleOf",(t,e)=>{de.init(t,e),t._zod.onattach.push(n=>{var s;(s=n._zod.bag).multipleOf??(s.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):ui(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),Qi=v("$ZodCheckNumberFormat",(t,e)=>{var o;de.init(t,e),e.format=e.format||"float64";const n=(o=e.format)==null?void 0:o.includes("int"),s=n?"int":"number",[r,i]=pi[e.format];t._zod.onattach.push(a=>{const u=a._zod.bag;u.format=e.format,u.minimum=r,u.maximum=i,n&&(u.pattern=Ki)}),t._zod.check=a=>{const u=a.value;if(n){if(!Number.isInteger(u)){a.issues.push({expected:s,format:e.format,code:"invalid_type",input:u,inst:t});return}if(!Number.isSafeInteger(u)){u>0?a.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort}):a.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort});return}}u<r&&a.issues.push({origin:"number",input:u,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),u>i&&a.issues.push({origin:"number",input:u,code:"too_big",maximum:i,inst:t})}}),eo=v("$ZodCheckMaxLength",(t,e)=>{de.init(t,e),t._zod.when=n=>{const s=n.value;return!Ln(s)&&s.length!==void 0},t._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{const s=n.value;if(s.length<=e.maximum)return;const i=Nn(s);n.issues.push({origin:i,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),to=v("$ZodCheckMinLength",(t,e)=>{de.init(t,e),t._zod.when=n=>{const s=n.value;return!Ln(s)&&s.length!==void 0},t._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{const s=n.value;if(s.length>=e.minimum)return;const i=Nn(s);n.issues.push({origin:i,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),no=v("$ZodCheckLengthEquals",(t,e)=>{de.init(t,e),t._zod.when=n=>{const s=n.value;return!Ln(s)&&s.length!==void 0},t._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=n=>{const s=n.value,r=s.length;if(r===e.length)return;const i=Nn(s),o=r>e.length;n.issues.push({origin:i,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},input:n.value,inst:t,continue:!e.abort})}}),qt=v("$ZodCheckStringFormat",(t,e)=>{var n;de.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format=e.format,e.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(e.pattern))}),(n=t._zod).check??(n.check=s=>{if(!e.pattern)throw new Error("Not implemented.");e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})})}),so=v("$ZodCheckRegex",(t,e)=>{qt.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),ro=v("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=Ji),qt.init(t,e)}),io=v("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=Yi),qt.init(t,e)}),oo=v("$ZodCheckIncludes",(t,e)=>{de.init(t,e);const n=xt(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=s,t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),ao=v("$ZodCheckStartsWith",(t,e)=>{de.init(t,e);const n=new RegExp(`^${xt(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),co=v("$ZodCheckEndsWith",(t,e)=>{de.init(t,e);const n=new RegExp(`.*${xt(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),uo=v("$ZodCheckOverwrite",(t,e)=>{de.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class lo{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(o=>o),r=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this==null?void 0:this.args,r=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new e(...n,r.join(`
`))}}const ho={major:4,minor:0,patch:0},B=v("$ZodType",(t,e)=>{var r;var n;t??(t={}),H(t._zod,"id",()=>e.type+"_"+rr(10)),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=ho;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const i of s)for(const o of i._zod.onattach)o(t);if(s.length===0)(n=t._zod).deferred??(n.deferred=[]),(r=t._zod.deferred)==null||r.push(()=>{t._zod.run=t._zod.parse});else{const i=(o,a,u)=>{let l=pt(o),g;for(const d of a){if(d._zod.when){if(!d._zod.when(o))continue}else if(l)continue;const k=o.issues.length,p=d._zod.check(o);if(p instanceof Promise&&(u==null?void 0:u.async)===!1)throw new bt;if(g||p instanceof Promise)g=(g??Promise.resolve()).then(async()=>{await p,o.issues.length!==k&&(l||(l=pt(o,k)))});else{if(o.issues.length===k)continue;l||(l=pt(o,k))}}return g?g.then(()=>o):o};t._zod.run=(o,a)=>{const u=t._zod.parse(o,a);if(u instanceof Promise){if(a.async===!1)throw new bt;return u.then(l=>i(l,s,a))}return i(u,s,a)}}t["~standard"]={validate:i=>{var o;try{const a=Si(t,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return Ai(t,i).then(u=>{var l;return u.success?{value:u.data}:{issues:(l=u.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),Zn=v("$ZodString",(t,e)=>{var n;B.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??Hi(t._zod.bag),t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:t}),s}}),W=v("$ZodStringFormat",(t,e)=>{qt.init(t,e),Zn.init(t,e)}),po=v("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Ri),W.init(t,e)}),fo=v("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=ls(s))}else e.pattern??(e.pattern=ls());W.init(t,e)}),go=v("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=zi),W.init(t,e)}),mo=v("$ZodURL",(t,e)=>{W.init(t,e),t._zod.check=n=>{try{const s=new URL(n.value);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Fi.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort}));return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),bo=v("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Di()),W.init(t,e)}),vo=v("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=$i),W.init(t,e)}),wo=v("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=ki),W.init(t,e)}),yo=v("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Ci),W.init(t,e)}),xo=v("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Ei),W.init(t,e)}),_o=v("$ZodXID",(t,e)=>{e.pattern??(e.pattern=Ii),W.init(t,e)}),So=v("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Oi),W.init(t,e)}),Ao=v("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Wi(e)),W.init(t,e),t._zod.check}),ko=v("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Vi),W.init(t,e)}),Co=v("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=Bi(e)),W.init(t,e),t._zod.check}),Eo=v("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Pi),W.init(t,e)}),Io=v("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Ti),W.init(t,e),t._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv4"})}),Oo=v("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Ni),W.init(t,e),t._zod.onattach.push(n=>{const s=n._zod.bag;s.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),$o=v("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=ji),W.init(t,e)}),Po=v("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Zi),W.init(t,e),t._zod.check=n=>{const[s,r]=n.value.split("/");try{if(!r)throw new Error;const i=Number(r);if(`${i}`!==r)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function br(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Ro=v("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Mi),W.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{br(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function zo(t){if(!hr.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return br(n)}const Lo=v("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=hr),W.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{zo(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),Do=v("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Ui),W.init(t,e)});function To(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[s]=n,r=JSON.parse(atob(s));return!("typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const No=v("$ZodJWT",(t,e)=>{W.init(t,e),t._zod.check=n=>{To(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),vr=v("$ZodNumber",(t,e)=>{B.init(t,e),t._zod.pattern=t._zod.bag.pattern??qi,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:t,...i?{received:i}:{}}),n}}),jo=v("$ZodNumber",(t,e)=>{Qi.init(t,e),vr.init(t,e)}),Zo=v("$ZodBoolean",(t,e)=>{B.init(t,e),t._zod.pattern=Gi,t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:t}),n}}),Mo=v("$ZodUnknown",(t,e)=>{B.init(t,e),t._zod.parse=n=>n}),Fo=v("$ZodNever",(t,e)=>{B.init(t,e),t._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function hs(t,e,n){t.issues.length&&e.issues.push(...Fe(n,t.issues)),e.value[n]=t.value}const Uo=v("$ZodArray",(t,e)=>{B.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const i=[];for(let o=0;o<r.length;o++){const a=r[o],u=e.element._zod.run({value:a,issues:[]},s);u instanceof Promise?i.push(u.then(l=>hs(l,n,o))):hs(u,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function kt(t,e,n){t.issues.length&&e.issues.push(...Fe(n,t.issues)),e.value[n]=t.value}function ds(t,e,n,s){t.issues.length?s[n]===void 0?n in s?e.value[n]=void 0:e.value[n]=t.value:e.issues.push(...Fe(n,t.issues)):t.value===void 0?n in s&&(e.value[n]=void 0):e.value[n]=t.value}const Vo=v("$ZodObject",(t,e)=>{B.init(t,e);const n=sr(()=>{const d=Object.keys(e.shape);for(const p of d)if(!(e.shape[p]instanceof B))throw new Error(`Invalid element at key "${p}": expected a Zod schema`);const k=di(e.shape);return{shape:e.shape,keys:d,keySet:new Set(d),numKeys:d.length,optionalKeys:new Set(k)}});H(t._zod,"propValues",()=>{const d=e.shape,k={};for(const p in d){const c=d[p]._zod;if(c.values){k[p]??(k[p]=new Set);for(const h of c.values)k[p].add(h)}}return k});const s=d=>{const k=new lo(["shape","payload","ctx"]),{keys:p,optionalKeys:c}=n.value,h=w=>{const y=nt(w);return`shape[${y}]._zod.run({ value: input[${y}], issues: [] }, ctx)`};k.write("const input = payload.value;");const m=Object.create(null);for(const w of p)m[w]=rr(15);k.write("const newResult = {}");for(const w of p)if(c.has(w)){const y=m[w];k.write(`const ${y} = ${h(w)};`);const I=nt(w);k.write(`
        if (${y}.issues.length) {
          if (input[${I}] === undefined) {
            if (${I} in input) {
              newResult[${I}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${y}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${I}, ...iss.path] : [${I}],
              }))
            );
          }
        } else if (${y}.value === undefined) {
          if (${I} in input) newResult[${I}] = undefined;
        } else {
          newResult[${I}] = ${y}.value;
        }
        `)}else{const y=m[w];k.write(`const ${y} = ${h(w)};`),k.write(`
          if (${y}.issues.length) payload.issues = payload.issues.concat(${y}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${nt(w)}, ...iss.path] : [${nt(w)}]
          })));`),k.write(`newResult[${nt(w)}] = ${y}.value`)}k.write("payload.value = newResult;"),k.write("return payload;");const f=k.compile();return(w,y)=>f(d,w,y)};let r;const i=Sn,o=!nr.jitless,u=o&&li.value,{catchall:l}=e;let g;t._zod.parse=(d,k)=>{g??(g=n.value);const p=d.value;if(!i(p))return d.issues.push({expected:"object",code:"invalid_type",input:p,inst:t}),d;const c=[];if(o&&u&&(k==null?void 0:k.async)===!1&&k.jitless!==!0)r||(r=s(e.shape)),d=r(d,k);else{d.value={};const y=g.shape;for(const I of g.keys){const G=y[I],E=G._zod.run({value:p[I],issues:[]},k),C=G._zod.optin==="optional"&&G._zod.optout==="optional";E instanceof Promise?c.push(E.then(T=>C?ds(T,d,I,p):kt(T,d,I))):C?ds(E,d,I,p):kt(E,d,I)}}if(!l)return c.length?Promise.all(c).then(()=>d):d;const h=[],m=g.keySet,f=l._zod,w=f.def.type;for(const y of Object.keys(p)){if(m.has(y))continue;if(w==="never"){h.push(y);continue}const I=f.run({value:p[y],issues:[]},k);I instanceof Promise?c.push(I.then(G=>kt(G,d,y))):kt(I,d,y)}return h.length&&d.issues.push({code:"unrecognized_keys",keys:h,input:p,inst:t}),c.length?Promise.all(c).then(()=>d):d}});function ps(t,e,n,s){for(const r of t)if(r.issues.length===0)return e.value=r.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(r=>r.issues.map(i=>ze(i,s,Re())))}),e}const Bo=v("$ZodUnion",(t,e)=>{B.init(t,e),H(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),H(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){const n=e.options.map(s=>s._zod.pattern);return new RegExp(`^(${n.map(s=>Dn(s.source)).join("|")})$`)}}),t._zod.parse=(n,s)=>{let r=!1;const i=[];for(const o of e.options){const a=o._zod.run({value:n.value,issues:[]},s);if(a instanceof Promise)i.push(a),r=!0;else{if(a.issues.length===0)return a;i.push(a)}}return r?Promise.all(i).then(o=>ps(o,n,t,s)):ps(i,n,t,s)}}),Wo=v("$ZodIntersection",(t,e)=>{B.init(t,e),t._zod.parse=(n,s)=>{const{value:r}=n,i=e.left._zod.run({value:r,issues:[]},s),o=e.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([u,l])=>fs(n,u,l)):fs(n,i,o)}});function kn(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(An(t)&&An(e)){const n=Object.keys(e),s=Object.keys(t).filter(i=>n.indexOf(i)!==-1),r={...t,...e};for(const i of s){const o=kn(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r[i]=o.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<t.length;s++){const r=t[s],i=e[s],o=kn(r,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function fs(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),pt(t))return t;const s=kn(e.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const Ho=v("$ZodRecord",(t,e)=>{B.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!An(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:t}),n;const i=[];if(e.keyType._zod.values){const o=e.keyType._zod.values;n.value={};for(const u of o)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){const l=e.valueType._zod.run({value:r[u],issues:[]},s);l instanceof Promise?i.push(l.then(g=>{g.issues.length&&n.issues.push(...Fe(u,g.issues)),n.value[u]=g.value})):(l.issues.length&&n.issues.push(...Fe(u,l.issues)),n.value[u]=l.value)}let a;for(const u in r)o.has(u)||(a=a??[],a.push(u));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:t,keys:a})}else{n.value={};for(const o of Reflect.ownKeys(r)){if(o==="__proto__")continue;const a=e.keyType._zod.run({value:o,issues:[]},s);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(l=>ze(l,s,Re())),input:o,path:[o],inst:t}),n.value[a.value]=a.value;continue}const u=e.valueType._zod.run({value:r[o],issues:[]},s);u instanceof Promise?i.push(u.then(l=>{l.issues.length&&n.issues.push(...Fe(o,l.issues)),n.value[a.value]=l.value})):(u.issues.length&&n.issues.push(...Fe(o,u.issues)),n.value[a.value]=u.value)}}return i.length?Promise.all(i).then(()=>n):n}}),Ko=v("$ZodEnum",(t,e)=>{B.init(t,e);const n=ai(e.entries);t._zod.values=new Set(n),t._zod.pattern=new RegExp(`^(${n.filter(s=>hi.has(typeof s)).map(s=>typeof s=="string"?xt(s):s.toString()).join("|")})$`),t._zod.parse=(s,r)=>{const i=s.value;return t._zod.values.has(i)||s.issues.push({code:"invalid_value",values:n,input:i,inst:t}),s}}),qo=v("$ZodLiteral",(t,e)=>{B.init(t,e),t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?xt(n):n?n.toString():String(n)).join("|")})$`),t._zod.parse=(n,s)=>{const r=n.value;return t._zod.values.has(r)||n.issues.push({code:"invalid_value",values:e.values,input:r,inst:t}),n}}),Go=v("$ZodTransform",(t,e)=>{B.init(t,e),t._zod.parse=(n,s)=>{const r=e.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new bt;return n.value=r,n}}),Jo=v("$ZodOptional",(t,e)=>{B.init(t,e),t._zod.optin="optional",t._zod.optout="optional",H(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),H(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Dn(n.source)})?$`):void 0}),t._zod.parse=(n,s)=>n.value===void 0?n:e.innerType._zod.run(n,s)}),Yo=v("$ZodNullable",(t,e)=>{B.init(t,e),H(t._zod,"optin",()=>e.innerType._zod.optin),H(t._zod,"optout",()=>e.innerType._zod.optout),H(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Dn(n.source)}|null)$`):void 0}),H(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,s)=>n.value===null?n:e.innerType._zod.run(n,s)}),Xo=v("$ZodDefault",(t,e)=>{B.init(t,e),t._zod.optin="optional",H(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>gs(i,e)):gs(r,e)}});function gs(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Qo=v("$ZodPrefault",(t,e)=>{B.init(t,e),t._zod.optin="optional",H(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>(n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,s))}),ea=v("$ZodNonOptional",(t,e)=>{B.init(t,e),H(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>ms(i,t)):ms(r,t)}});function ms(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const ta=v("$ZodCatch",(t,e)=>{B.init(t,e),H(t._zod,"optin",()=>e.innerType._zod.optin),H(t._zod,"optout",()=>e.innerType._zod.optout),H(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>ze(o,s,Re()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(i=>ze(i,s,Re()))},input:n.value}),n.issues=[]),n)}}),na=v("$ZodPipe",(t,e)=>{B.init(t,e),H(t._zod,"values",()=>e.in._zod.values),H(t._zod,"optin",()=>e.in._zod.optin),H(t._zod,"optout",()=>e.out._zod.optout),t._zod.parse=(n,s)=>{const r=e.in._zod.run(n,s);return r instanceof Promise?r.then(i=>bs(i,e,s)):bs(r,e,s)}});function bs(t,e,n){return pt(t)?t:e.out._zod.run({value:t.value,issues:t.issues},n)}const sa=v("$ZodReadonly",(t,e)=>{B.init(t,e),H(t._zod,"propValues",()=>e.innerType._zod.propValues),H(t._zod,"optin",()=>e.innerType._zod.optin),H(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(vs):vs(r)}});function vs(t){return t.value=Object.freeze(t.value),t}const ra=v("$ZodCustom",(t,e)=>{de.init(t,e),B.init(t,e),t._zod.parse=(n,s)=>n,t._zod.check=n=>{const s=n.value,r=e.fn(s);if(r instanceof Promise)return r.then(i=>ws(i,n,s,t));ws(r,n,s,t)}});function ws(t,e,n,s){if(!t){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),e.issues.push(vt(r))}}class ia{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const s=n[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}remove(e){return this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const s={...this.get(n)??{}};return delete s.id,{...s,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function oa(){return new ia}const Ct=oa();function aa(t,e){return new t({type:"string",...O(e)})}function ca(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...O(e)})}function ys(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...O(e)})}function ua(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...O(e)})}function la(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...O(e)})}function ha(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...O(e)})}function da(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...O(e)})}function pa(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...O(e)})}function fa(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...O(e)})}function ga(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...O(e)})}function ma(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...O(e)})}function ba(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...O(e)})}function va(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...O(e)})}function wa(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...O(e)})}function ya(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...O(e)})}function xa(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...O(e)})}function _a(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...O(e)})}function Sa(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...O(e)})}function Aa(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...O(e)})}function ka(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...O(e)})}function Ca(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...O(e)})}function Ea(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...O(e)})}function Ia(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...O(e)})}function Oa(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...O(e)})}function $a(t,e){return new t({type:"string",format:"date",check:"string_format",...O(e)})}function Pa(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...O(e)})}function Ra(t,e){return new t({type:"string",format:"duration",check:"string_format",...O(e)})}function za(t,e){return new t({type:"number",checks:[],...O(e)})}function La(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...O(e)})}function Da(t,e){return new t({type:"boolean",...O(e)})}function Ta(t){return new t({type:"unknown"})}function Na(t,e){return new t({type:"never",...O(e)})}function xs(t,e){return new gr({check:"less_than",...O(e),value:t,inclusive:!1})}function sn(t,e){return new gr({check:"less_than",...O(e),value:t,inclusive:!0})}function _s(t,e){return new mr({check:"greater_than",...O(e),value:t,inclusive:!1})}function rn(t,e){return new mr({check:"greater_than",...O(e),value:t,inclusive:!0})}function Ss(t,e){return new Xi({check:"multiple_of",...O(e),value:t})}function wr(t,e){return new eo({check:"max_length",...O(e),maximum:t})}function Zt(t,e){return new to({check:"min_length",...O(e),minimum:t})}function yr(t,e){return new no({check:"length_equals",...O(e),length:t})}function ja(t,e){return new so({check:"string_format",format:"regex",...O(e),pattern:t})}function Za(t){return new ro({check:"string_format",format:"lowercase",...O(t)})}function Ma(t){return new io({check:"string_format",format:"uppercase",...O(t)})}function Fa(t,e){return new oo({check:"string_format",format:"includes",...O(e),includes:t})}function Ua(t,e){return new ao({check:"string_format",format:"starts_with",...O(e),prefix:t})}function Va(t,e){return new co({check:"string_format",format:"ends_with",...O(e),suffix:t})}function _t(t){return new uo({check:"overwrite",tx:t})}function Ba(t){return _t(e=>e.normalize(t))}function Wa(){return _t(t=>t.trim())}function Ha(){return _t(t=>t.toLowerCase())}function Ka(){return _t(t=>t.toUpperCase())}function qa(t,e,n){return new t({type:"array",element:e,...O(n)})}function Ga(t,e,n){return new t({type:"custom",check:"custom",fn:e,...O(n)})}const Ja=v("ZodISODateTime",(t,e)=>{Ao.init(t,e),q.init(t,e)});function Ya(t){return Oa(Ja,t)}const Xa=v("ZodISODate",(t,e)=>{ko.init(t,e),q.init(t,e)});function Qa(t){return $a(Xa,t)}const ec=v("ZodISOTime",(t,e)=>{Co.init(t,e),q.init(t,e)});function tc(t){return Pa(ec,t)}const nc=v("ZodISODuration",(t,e)=>{Eo.init(t,e),q.init(t,e)});function sc(t){return Ra(nc,t)}const rc=(t,e)=>{ar.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>yi(t,n)},flatten:{value:n=>jn(t,n)},addIssue:{value:n=>t.issues.push(n)},addIssues:{value:n=>t.issues.push(...n)},isEmpty:{get(){return t.issues.length===0}}})},Gt=v("ZodError",rc,{Parent:Error}),ic=xi(Gt),oc=_i(Gt),ac=ur(Gt),cc=lr(Gt),J=v("ZodType",(t,e)=>(B.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),t.clone=(n,s)=>Ue(t,n,s),t.brand=()=>t,t.register=(n,s)=>(n.add(t,s),t),t.parse=(n,s)=>ic(t,n,s,{callee:t.parse}),t.safeParse=(n,s)=>ac(t,n,s),t.parseAsync=async(n,s)=>oc(t,n,s,{callee:t.parseAsync}),t.safeParseAsync=async(n,s)=>cc(t,n,s),t.spa=t.safeParseAsync,t.refine=(n,s)=>t.check(tu(n,s)),t.superRefine=n=>t.check(nu(n)),t.overwrite=n=>t.check(_t(n)),t.optional=()=>Es(t),t.nullable=()=>Is(t),t.nullish=()=>Es(Is(t)),t.nonoptional=n=>Kc(t,n),t.array=()=>Le(t),t.or=n=>Sr([t,n]),t.and=n=>Tc(t,n),t.transform=n=>Os(t,Fc(n)),t.default=n=>Bc(t,n),t.prefault=n=>Hc(t,n),t.catch=n=>Gc(t,n),t.pipe=n=>Os(t,n),t.readonly=()=>Xc(t),t.describe=n=>{const s=t.clone();return Ct.add(s,{description:n}),s},Object.defineProperty(t,"description",{get(){var n;return(n=Ct.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Ct.get(t);const s=t.clone();return Ct.add(s,n[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),xr=v("_ZodString",(t,e)=>{Zn.init(t,e),J.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...s)=>t.check(ja(...s)),t.includes=(...s)=>t.check(Fa(...s)),t.startsWith=(...s)=>t.check(Ua(...s)),t.endsWith=(...s)=>t.check(Va(...s)),t.min=(...s)=>t.check(Zt(...s)),t.max=(...s)=>t.check(wr(...s)),t.length=(...s)=>t.check(yr(...s)),t.nonempty=(...s)=>t.check(Zt(1,...s)),t.lowercase=s=>t.check(Za(s)),t.uppercase=s=>t.check(Ma(s)),t.trim=()=>t.check(Wa()),t.normalize=(...s)=>t.check(Ba(...s)),t.toLowerCase=()=>t.check(Ha()),t.toUpperCase=()=>t.check(Ka())}),uc=v("ZodString",(t,e)=>{Zn.init(t,e),xr.init(t,e),t.email=n=>t.check(ca(lc,n)),t.url=n=>t.check(pa(hc,n)),t.jwt=n=>t.check(Ia(Cc,n)),t.emoji=n=>t.check(fa(dc,n)),t.guid=n=>t.check(ys(As,n)),t.uuid=n=>t.check(ua(Et,n)),t.uuidv4=n=>t.check(la(Et,n)),t.uuidv6=n=>t.check(ha(Et,n)),t.uuidv7=n=>t.check(da(Et,n)),t.nanoid=n=>t.check(ga(pc,n)),t.guid=n=>t.check(ys(As,n)),t.cuid=n=>t.check(ma(fc,n)),t.cuid2=n=>t.check(ba(gc,n)),t.ulid=n=>t.check(va(mc,n)),t.base64=n=>t.check(ka(Sc,n)),t.base64url=n=>t.check(Ca(Ac,n)),t.xid=n=>t.check(wa(bc,n)),t.ksuid=n=>t.check(ya(vc,n)),t.ipv4=n=>t.check(xa(wc,n)),t.ipv6=n=>t.check(_a(yc,n)),t.cidrv4=n=>t.check(Sa(xc,n)),t.cidrv6=n=>t.check(Aa(_c,n)),t.e164=n=>t.check(Ea(kc,n)),t.datetime=n=>t.check(Ya(n)),t.date=n=>t.check(Qa(n)),t.time=n=>t.check(tc(n)),t.duration=n=>t.check(sc(n))});function U(t){return aa(uc,t)}const q=v("ZodStringFormat",(t,e)=>{W.init(t,e),xr.init(t,e)}),lc=v("ZodEmail",(t,e)=>{go.init(t,e),q.init(t,e)}),As=v("ZodGUID",(t,e)=>{po.init(t,e),q.init(t,e)}),Et=v("ZodUUID",(t,e)=>{fo.init(t,e),q.init(t,e)}),hc=v("ZodURL",(t,e)=>{mo.init(t,e),q.init(t,e)}),dc=v("ZodEmoji",(t,e)=>{bo.init(t,e),q.init(t,e)}),pc=v("ZodNanoID",(t,e)=>{vo.init(t,e),q.init(t,e)}),fc=v("ZodCUID",(t,e)=>{wo.init(t,e),q.init(t,e)}),gc=v("ZodCUID2",(t,e)=>{yo.init(t,e),q.init(t,e)}),mc=v("ZodULID",(t,e)=>{xo.init(t,e),q.init(t,e)}),bc=v("ZodXID",(t,e)=>{_o.init(t,e),q.init(t,e)}),vc=v("ZodKSUID",(t,e)=>{So.init(t,e),q.init(t,e)}),wc=v("ZodIPv4",(t,e)=>{Io.init(t,e),q.init(t,e)}),yc=v("ZodIPv6",(t,e)=>{Oo.init(t,e),q.init(t,e)}),xc=v("ZodCIDRv4",(t,e)=>{$o.init(t,e),q.init(t,e)}),_c=v("ZodCIDRv6",(t,e)=>{Po.init(t,e),q.init(t,e)}),Sc=v("ZodBase64",(t,e)=>{Ro.init(t,e),q.init(t,e)}),Ac=v("ZodBase64URL",(t,e)=>{Lo.init(t,e),q.init(t,e)}),kc=v("ZodE164",(t,e)=>{Do.init(t,e),q.init(t,e)}),Cc=v("ZodJWT",(t,e)=>{No.init(t,e),q.init(t,e)}),_r=v("ZodNumber",(t,e)=>{vr.init(t,e),J.init(t,e),t.gt=(s,r)=>t.check(_s(s,r)),t.gte=(s,r)=>t.check(rn(s,r)),t.min=(s,r)=>t.check(rn(s,r)),t.lt=(s,r)=>t.check(xs(s,r)),t.lte=(s,r)=>t.check(sn(s,r)),t.max=(s,r)=>t.check(sn(s,r)),t.int=s=>t.check(ks(s)),t.safe=s=>t.check(ks(s)),t.positive=s=>t.check(_s(0,s)),t.nonnegative=s=>t.check(rn(0,s)),t.negative=s=>t.check(xs(0,s)),t.nonpositive=s=>t.check(sn(0,s)),t.multipleOf=(s,r)=>t.check(Ss(s,r)),t.step=(s,r)=>t.check(Ss(s,r)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function $(t){return za(_r,t)}const Ec=v("ZodNumberFormat",(t,e)=>{jo.init(t,e),_r.init(t,e)});function ks(t){return La(Ec,t)}const Ic=v("ZodBoolean",(t,e)=>{Zo.init(t,e),J.init(t,e)});function ee(t){return Da(Ic,t)}const Oc=v("ZodUnknown",(t,e)=>{Mo.init(t,e),J.init(t,e)});function Cs(){return Ta(Oc)}const $c=v("ZodNever",(t,e)=>{Fo.init(t,e),J.init(t,e)});function Pc(t){return Na($c,t)}const Rc=v("ZodArray",(t,e)=>{Uo.init(t,e),J.init(t,e),t.element=e.element,t.min=(n,s)=>t.check(Zt(n,s)),t.nonempty=n=>t.check(Zt(1,n)),t.max=(n,s)=>t.check(wr(n,s)),t.length=(n,s)=>t.check(yr(n,s)),t.unwrap=()=>t.element});function Le(t,e){return qa(Rc,t,e)}const zc=v("ZodObject",(t,e)=>{Vo.init(t,e),J.init(t,e),H(t,"shape",()=>e.shape),t.keyof=()=>K(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Cs()}),t.loose=()=>t.clone({...t._zod.def,catchall:Cs()}),t.strict=()=>t.clone({...t._zod.def,catchall:Pc()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>mi(t,n),t.merge=n=>bi(t,n),t.pick=n=>fi(t,n),t.omit=n=>gi(t,n),t.partial=(...n)=>vi(Ar,t,n[0]),t.required=(...n)=>wi(kr,t,n[0])});function N(t,e){const n={type:"object",get shape(){return Tn(this,"shape",{...t}),this.shape},...O(e)};return new zc(n)}const Lc=v("ZodUnion",(t,e)=>{Bo.init(t,e),J.init(t,e),t.options=e.options});function Sr(t,e){return new Lc({type:"union",options:t,...O(e)})}const Dc=v("ZodIntersection",(t,e)=>{Wo.init(t,e),J.init(t,e)});function Tc(t,e){return new Dc({type:"intersection",left:t,right:e})}const Nc=v("ZodRecord",(t,e)=>{Ho.init(t,e),J.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function jc(t,e,n){return new Nc({type:"record",keyType:t,valueType:e,...O(n)})}const Cn=v("ZodEnum",(t,e)=>{Ko.init(t,e),J.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(s,r)=>{const i={};for(const o of s)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Cn({...e,checks:[],...O(r),entries:i})},t.exclude=(s,r)=>{const i={...e.entries};for(const o of s)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Cn({...e,checks:[],...O(r),entries:i})}});function K(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new Cn({type:"enum",entries:n,...O(e)})}const Zc=v("ZodLiteral",(t,e)=>{qo.init(t,e),J.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function Jh(t,e){return new Zc({type:"literal",values:Array.isArray(t)?t:[t],...O(e)})}const Mc=v("ZodTransform",(t,e)=>{Go.init(t,e),J.init(t,e),t._zod.parse=(n,s)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(vt(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!0),n.issues.push(vt(o))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function Fc(t){return new Mc({type:"transform",transform:t})}const Ar=v("ZodOptional",(t,e)=>{Jo.init(t,e),J.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Es(t){return new Ar({type:"optional",innerType:t})}const Uc=v("ZodNullable",(t,e)=>{Yo.init(t,e),J.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Is(t){return new Uc({type:"nullable",innerType:t})}const Vc=v("ZodDefault",(t,e)=>{Xo.init(t,e),J.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Bc(t,e){return new Vc({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const Wc=v("ZodPrefault",(t,e)=>{Qo.init(t,e),J.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Hc(t,e){return new Wc({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const kr=v("ZodNonOptional",(t,e)=>{ea.init(t,e),J.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Kc(t,e){return new kr({type:"nonoptional",innerType:t,...O(e)})}const qc=v("ZodCatch",(t,e)=>{ta.init(t,e),J.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Gc(t,e){return new qc({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const Jc=v("ZodPipe",(t,e)=>{na.init(t,e),J.init(t,e),t.in=e.in,t.out=e.out});function Os(t,e){return new Jc({type:"pipe",in:t,out:e})}const Yc=v("ZodReadonly",(t,e)=>{sa.init(t,e),J.init(t,e)});function Xc(t){return new Yc({type:"readonly",innerType:t})}const Qc=v("ZodCustom",(t,e)=>{ra.init(t,e),J.init(t,e)});function eu(t,e){const n=new de({check:"custom",...O(e)});return n._zod.check=t,n}function tu(t,e={}){return Ga(Qc,t,e)}function nu(t,e){const n=eu(s=>(s.addIssue=r=>{if(typeof r=="string")s.issues.push(vt(r,s.value,n._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=s.value),i.inst??(i.inst=n),i.continue??(i.continue=!n._zod.def.abort),s.issues.push(vt(i))}},t(s.value,s)),e);return n}var L=(t=>(t.persist="local",t.session="session",t))(L||{});class ie{constructor(e,n,s){Z(this,"storageAreaMap",{[L.session]:M.storage.session,[L.persist]:M.storage.local});Z(this,"state");this.moduleName=e,this.moduleSchema=n,this.eventService=s,this.eventService.subscribe({reset:this.reset.bind(this)}),this.state=n.getDefaultValue()}async sync(){this.state=await this.get()}async set(e){const n=new Map;Object.keys(this.storageAreaMap).forEach(s=>{n.set(s,{})}),Object.entries(e).forEach(([s,r])=>{const i=this.moduleSchema.getPropDescription(s),o=n.get(i)??{};n.set(i,{...o,[s]:r})}),this.state=Object.assign({},...n.values()),await Promise.all([...n.entries()].map(([s,r])=>this.storageAreaMap[s].set({[this.moduleName]:r})))}async setItems(e){const n=await this.get(),s=Object.assign({},n,e);await this.set(s);const r=this.moduleSchema.partialValidate(e);if(!r.success){const i=jn(r.error);let o;try{o=JSON.stringify(e)}catch{o="[Unserializable data] - "+typeof e}this.eventService.dispatch({send:{types:["aws-kinesis"],name:"set_storage_validation_errors",data:{event_properties__failed_reason:JSON.stringify({[this.moduleName]:i.fieldErrors,data:o})}}})}}async get(){const n=(await Promise.all(Object.values(this.storageAreaMap).map(o=>o.get(this.moduleName)))).map(o=>o[this.moduleName]),s=this.moduleSchema.getDefaultValue(),r=Object.assign({},s,...n);return this.moduleSchema.safeParseWithDefaults(r,o=>{this.eventService.dispatch({send:{types:["aws-kinesis"],name:"storage_validation_errors",data:{event_properties__failed_reason:JSON.stringify({[this.moduleName]:o.fieldErrors})}}})})}async getItems(...e){const n=await this.get();return ie.pickPartialObject(n,e)}async remove(){await Promise.all(Object.values(this.storageAreaMap).map(e=>e.remove(this.moduleName)))}async removeItems(...e){const n=await this.get(),s=ie.omitPartialObject(n,e);await this.set(s)}async reset(){const e=await this.get(),n=this.moduleSchema.getDefaultValue(),s=Object.entries(n).reduce((o,[a,u])=>({...o,[a]:e[a]??u}),{}),r=this.moduleSchema.safeParse(s),i=r.success?r.data:n;await this.set(i)}static omitPartialObject(e,n){return Object.fromEntries(Object.entries(e).filter(([r])=>!n.includes(r)))}static pickPartialObject(e,n){return Object.fromEntries(n.map(r=>[r,e[r]]))}}class su{constructor(){Z(this,"eventMap",new Map)}subscribe(e){Object.entries(e).forEach(([s,r])=>{this.eventMap.has(s)||this.eventMap.set(s,[]);const i=[...this.eventMap.get(s)??[],r];this.eventMap.set(s,i)})}dispatch(e){const n=Object.entries(e),s=[];return n.forEach(([r,i])=>{(this.eventMap.get(r)??[]).forEach(a=>{s.push(a(i))})}),s}}const oe=new su;class ge{constructor(e){this.schema=e}getDefaultValue(){return this.schema.parse(void 0)}validate(e){return this.schema.safeParse(e).success}partialValidate(e){return this.schema._zod.def.innerType.partial().safeParse(e)}safeParse(e){return this.schema.safeParse(e)}safeParseWithDefaults(e,n){const s=this.safeParse(e),r=this.getDefaultValue();if(!s.success){const i=jn(s.error);n==null||n(i)}return s.success?Object.assign({},r,s.data):r}getPropDescription(e){return this.schema._zod.def.innerType.shape[e].description}}const on="https://veepn.com/",$s="udid",ru=["local","cookie","new"],iu=N({type:K(ru),value:U()}),ou=N({width:$(),height:$()}),au=N({installedAt:$().describe(L.persist),deviceScreen:ou.optional().describe(L.persist),criticalError:ee().optional().describe(L.persist),udid:iu.optional().describe(L.persist)}).default({installedAt:Date.now()}),cu=new ge(au);class Mn extends he{constructor(n){super();Z(this,"glogalBootResolve");Z(this,"appBooted");this.globalStateStorage=n,this.glogalBootResolve=()=>{},this.appBooted=new Promise(s=>{this.glogalBootResolve=s})}get udid(){return this.globalStateStorage.state.udid??{type:"new",value:""}}get criticalError(){return!!this.globalStateStorage.state.criticalError}get installedAt(){return this.globalStateStorage.state.installedAt??0}get deviceScreen(){return this.globalStateStorage.state.deviceScreen??{width:0,height:0}}async boot(){await this.globalStateStorage.sync(),this.globalStateStorage.state.installedAt||await this.setAppInstallationDate(Date.now());const n=await this.generateUdid();await this.setUdid(n),this.bootResolve(),await this.bootPromise}globalboot(){this.glogalBootResolve()}async setCriticalError(n){await this.globalStateStorage.setItems({criticalError:n})}async setDeviceScreenData(n){await this.globalStateStorage.setItems({deviceScreen:n})}async setAppInstallationDate(n){await this.globalStateStorage.setItems({installedAt:n})}async setUdid(n){await Mn.setCookiesUdid(n.value),await this.globalStateStorage.setItems({udid:n})}async generateUdid(){const{udid:n}=await this.globalStateStorage.getItems("udid");if(n!=null&&n.value)return{type:"local",value:n.value};const s=await M.cookies.get({url:on,name:"udid"});return s!=null&&s.value?{type:"cookie",value:s.value}:{type:"new",value:crypto.randomUUID()}}static async setCookiesUdid(n){const s=new URL(on),r=new Date;r.setFullYear(r.getFullYear()+1),await M.cookies.set({name:$s,value:n,url:s.href,domain:`.${s.hostname}`,expirationDate:r.getTime()/1e3})}async getCookiesUdid(){Promise.resolve(this).catch(()=>{});const n=new URL(on),s=await M.cookies.get({name:$s,url:n.href});return s==null?void 0:s.value}}const uu=new ie("global-state",cu,oe),Jt=new Mn(uu);function lu(t){return!!(typeof t=="object"&&t!==null&&"errors"in t&&Array.isArray(t.errors))}function hu(t){return typeof t=="object"&&t!==null&&"success"in t&&"data"in t}function du(t){return typeof t=="object"&&t!==null&&"name"in t&&"message"in t&&"code"in t}class wt{constructor(){Z(this,"ABORT_FETCH_TIME",1e4)}async request(e){try{const n=new AbortController,s=e.timeout??this.ABORT_FETCH_TIME,r=setTimeout(()=>n.abort(),s),i=await fetch(e.url,{signal:n.signal,method:e.method,headers:{Accept:"application/json","Content-Type":"application/json",...e.headers??{}},...e.body?{body:JSON.stringify(e.body)}:{},...e.cache?{cache:e.cache}:{}});if(clearTimeout(r),!i.ok)throw i;const o=i.headers.get("content-type"),a=o!=null&&o.includes("application/json")?await i.json():await i.text();return hu(a)?a:{success:!0,data:a}}catch(n){if(n instanceof Response)try{const s=await n.json();return lu(s)?s:{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${n.statusText}`,status:n.status,code:1}]}}catch{return{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${n.statusText}`,status:n.status,code:2}]}}return du(n)?{success:!1,errors:[{name:n.name,message:"Server take long time to response. Please, try again or contact us for assistance.",status:0,code:n.code}]}:{success:!1,errors:[{name:"custom",message:`Fetch error at ${e.url}`,status:0,code:4}]}}}static getStatusCodeMessage(e){var s,r,i,o;return(((s=e.errors[0])==null?void 0:s.status)||((r=e.errors[0])==null?void 0:r.message)||((i=e.errors[0])==null?void 0:i.name)||((o=e.errors[0])==null?void 0:o.code)||"unknown").toString()}}const Yt=new wt,pu=["google-analytics","aws-kinesis","amplitude"],fu=N({types:Le(K(pu)),name:U(),data:jc(U(),Sr([U(),$(),ee()])).optional()});class Yh{constructor(e){Z(this,"type");Z(this,"available",!1);Z(this,"bootResolve");Z(this,"bootReject");Z(this,"bootPromise");this.type=e,this.bootResolve=()=>{},this.bootReject=()=>{},this.bootPromise=new Promise((n,s)=>{this.bootResolve=()=>{this.available=!0,n()},this.bootReject=()=>{this.available=!1,s(new Error("boot error AnalyticsEntity"))}})}}const gu=N({group:$(),slug:U()}),mu=N({collectAnalytics:ee(),privacyAgreement:ee()}),bu=N({privacy:mu.nullable().describe(L.persist),experiment:gu.optional().describe(L.persist),eventsBuffer:Le(fu).optional().describe(L.session)}).default({privacy:null}),vu=new ge(bu);class wu extends he{constructor(n,s){super();Z(this,"services",new Map);Z(this,"saveEventPromises",[]);this.analyticsStateStorage=n,this.eventService=s,this.eventService.subscribe({send:this.sendEvent.bind(this)})}get experiment(){return this.analyticsStateStorage.state.experiment??null}get needPrivacyAcceptance(){return!this.analyticsStateStorage.state.privacy}get canSendAnalytics(){const{privacy:n}=this.analyticsStateStorage.state;return!!(n!=null&&n.privacyAgreement)&&!!(n!=null&&n.collectAnalytics)}get eventsBuffer(){return this.analyticsStateStorage.state.eventsBuffer??[]}async boot(){await this.analyticsStateStorage.sync(),this.needPrivacyAcceptance&&await this.setPrivacy({collectAnalytics:!0,privacyAgreement:!0}),this.bootResolve(),await this.bootPromise}use(n){this.services.has(n.type)||this.services.set(n.type,n)}sendEvent(n){if(this.needPrivacyAcceptance){this.saveEventPromises.push(this.saveEventToBuffer(n));return}this.canSendAnalytics&&n.types.forEach(s=>{const r=this.services.get(s);r==null||r.send(n).catch(()=>{})})}async setExperiment(n){await this.analyticsStateStorage.setItems({experiment:n})}async removeExperiment(){await this.analyticsStateStorage.removeItems("experiment")}async setPrivacy(n){await this.analyticsStateStorage.setItems({privacy:n}),this.canSendAnalytics&&this.sendBufferedEvents(),await this.clearEventsBuffer()}async saveEventToBuffer(n){await Promise.all([...this.saveEventPromises]),await this.analyticsStateStorage.setItems({eventsBuffer:[...this.eventsBuffer,n]})}sendBufferedEvents(){[...this.eventsBuffer].forEach(s=>{this.sendEvent(s)})}async clearEventsBuffer(){await this.analyticsStateStorage.setItems({eventsBuffer:[]}),this.saveEventPromises.length=0}}const yu=new ie("analytics",vu,oe),Xt=new wu(yu,oe);var Mt=(t=>(t[t.not_active=0]="not_active",t[t.control=1]="control",t[t.test=2]="test",t))(Mt||{}),ft=(t=>(t[t.not_active=0]="not_active",t[t.active=1]="active",t[t.complited=2]="complited",t))(ft||{}),_e=(t=>(t.discount60off="abtest_60off_discount_lto",t.promoBannerClose="abtest_promo_banner_close",t.onboardingWithPlans="abtest_onboarding_with_plans",t))(_e||{});const xu=N({group:K(Mt),experiment_slug:K(_e),status:K(ft)}),_u=N({experiments:Le(xu),updatedAt:$()}),Su=N({config:_u.optional().describe(L.persist),ongoingExperiments:Le(K(_e)).optional().describe(L.persist)}).default({}),Au=new ge(Su),ku="https://split-tool.com/api/application-experiment/bulk-group/",Cu="e9efc93ef559ff3064712c2a3399aff66eb8",an="https://veepn.com/",cn="https://fake-veepn.com/",Be="veepn-ab-tests",Eu=24*60*60*1e3;class Ie extends he{constructor(e,n,s,r,i){super(),this.bundleSettings=e,this.testStorage=n,this.globalStateService=s,this.fetchService=r,this.analyticsService=i}async boot(){var e;if(await this.testStorage.sync(),(((e=this.testStorage.state.config)==null?void 0:e.updatedAt)??0)+Eu<Date.now()){const r=Object.values(this.bundleSettings).map(o=>o.experimentSlug),i=await this.fetchExperimentsConfigs(r);i.length>0?(await this.setExperimentsConfigs(i),await this.updateActiveExperiment()):await this.clearExperimentsData()}this.bootResolve(),await this.bootPromise}getExperimentStatus(e){const{config:n,ongoingExperiments:s}=this.testStorage.state;if(!n||!s)return{active:!1};const r=n.experiments.find(({experiment_slug:i})=>i===e);return r?r.group>=Mt.test&&r.status===ft.active&&s.includes(e)?{active:!0,group:r.group}:r.group>=Mt.test&&r.status===ft.complited?{active:!0,group:r.group}:{active:!1}:{active:!1}}async initExperiments(e){const n=Object.values(this.bundleSettings).map(o=>o.experimentSlug),s=await Ie.getOngoingExperimentsCookie(),r=Object.values(this.bundleSettings).filter(o=>o.initReasons.includes(e)).map(o=>o.experimentSlug),i=[...new Set([...r,...s])].filter(o=>n.includes(o));await this.setOngoingExperiments(i),await this.updateActiveExperiment()}async updateActiveExperiment(){const{config:e,ongoingExperiments:n}=this.testStorage.state;if(!e||!n){await this.removeActiveExperiment();return}const s=e.experiments.find(r=>r.status===ft.active);s&&n.includes(s.experiment_slug)?await this.setActiveExperiment(s):await this.removeActiveExperiment()}async clearExperimentsData(){await this.removeOngoingExperiments(),await this.removeActiveExperiment(),await this.removeExperimentsConfigs()}async fetchExperimentsConfigs(e){if(e.length===0)return[];const n={bundle_id:Cu,udid:this.globalStateService.udid.value,experiment_name:e.join(", "),language:"en"},s=await this.fetchService.request({url:ku,method:"POST",body:n});return s.success?s.data:[]}async setExperimentsConfigs(e){await this.testStorage.setItems({config:{experiments:e,updatedAt:Date.now()}})}async removeExperimentsConfigs(){await this.testStorage.setItems({config:{experiments:[],updatedAt:Date.now()}})}async setActiveExperiment(e){await this.analyticsService.setExperiment({slug:e.experiment_slug,group:e.group});const n=await Ie.getActiveExperimentWebsiteCookie(e.experiment_slug);(n==null?void 0:n.group)===e.group&&(await Ie.setActiveExperimentWebsiteCookie([{slug:e.experiment_slug,group:e.group}]),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:`${e.experiment_slug}_group_${e.group}`,data:{test_name:e.experiment_slug,user_group:e.group}}),this.analyticsService.sendEvent({types:["aws-kinesis"],name:"exp_group",data:{event_properties__exp_id:e.experiment_slug,event_properties__exp_var:e.group.toString()}}))}async removeActiveExperiment(){await this.analyticsService.removeExperiment(),await Ie.removeActiveExperimentWebsiteCookie()}async setOngoingExperiments(e){await this.testStorage.setItems({ongoingExperiments:e}),await Ie.setOngoingExperimentsCookie(e)}async removeOngoingExperiments(){await this.testStorage.setItems({ongoingExperiments:[]}),await Ie.removeOngoingExperimentsCookie()}static async getActiveExperimentWebsiteCookie(e){const n=new URL(an),s=await M.cookies.get({name:Be,url:n.href});if(s)try{return JSON.parse(s.value).find(o=>o.slug===e)}catch{return}}static async setActiveExperimentWebsiteCookie(e){const n=new URL(an),s=new Date;s.setFullYear(s.getFullYear()+1),await M.cookies.set({name:Be,value:JSON.stringify(e),url:n.href,domain:`.${n.hostname}`,expirationDate:s.getTime()/1e3})}static async removeActiveExperimentWebsiteCookie(){const e=new URL(an);await M.cookies.remove({name:Be,url:e.href})}static async getOngoingExperimentsCookie(){const e=new URL(cn),n=await M.cookies.get({name:Be,url:e.href});if(!n)return[];try{const s=JSON.parse(n.value);return Array.isArray(s)&&s.every(r=>typeof r=="string")?s:[]}catch{return[]}}static async setOngoingExperimentsCookie(e){const n=new URL(cn),s=new Date;s.setFullYear(s.getFullYear()+1),await M.cookies.set({name:Be,value:JSON.stringify(e),url:n.href,domain:`.${n.hostname}`,expirationDate:s.getTime()/1e3})}static async removeOngoingExperimentsCookie(){const e=new URL(cn);await M.cookies.remove({name:Be,url:e.href})}}const Iu=new ie("test",Au,oe),Ou={[_e.discount60off]:{experimentSlug:_e.discount60off,initReasons:["install","update"]},[_e.promoBannerClose]:{experimentSlug:_e.promoBannerClose,initReasons:["install","update"]},[_e.onboardingWithPlans]:{experimentSlug:_e.onboardingWithPlans,initReasons:["install"]}},Xh=new Ie(Ou,Iu,Jt,Yt,Xt);var Cr=(t=>(t[t.regular=0]="regular",t[t.lifeTime=1]="lifeTime",t))(Cr||{}),Fn=(t=>(t[t.prepaid=0]="prepaid",t[t.trial=1]="trial",t))(Fn||{}),Oe=(t=>(t[t.disabled=0]="disabled",t[t.active=1]="active",t))(Oe||{}),Er=(t=>(t[t.noSlots=0]="noSlots",t[t.hasSlots=1]="hasSlots",t))(Er||{}),Ft=(t=>(t[t.missing=0]="missing",t[t.vpn=1]="vpn",t[t.slot=2]="slot",t[t.antivirus=3]="antivirus",t[t.bundle=4]="bundle",t))(Ft||{}),je=(t=>(t[t.disabled=0]="disabled",t[t.active=1]="active",t))(je||{}),Ir=(t=>(t[t.needConfirm=0]="needConfirm",t[t.confirmed=1]="confirmed",t))(Ir||{});const $u=N({name:U(),infinity:K(Cr),trial:K(Fn),status:K(Oe),slot:K(Er),startTime:$(),endTime:$(),countdown:$(),today:$()}),Pu=N({id:$(),username:U(),email:U().email(),status:K(je),confirm:K(Ir),registeredAt:$(),registeredCountryCode:U(),lastLoggedAt:$(),lastCountryCode:U(),confirmedEmailAt:$(),shareUrl:U().url()}),Ru=N({id:$(),user_id:$(),product_id:$(),name:U(),base_transaction_id:U(),status:$(),status_auto_renew:$(),last_order_type:$(),recurring_type:$(),type:$(),gateway:$(),start_time:$(),expiry_time:$(),infinity:$()}),zu=N({id:$(),user_id:$(),product_id:$(),name:U(),base_transaction_id:U(),status:K(Oe),status_auto_renew:$(),last_order_type:$(),recurring_type:$(),type:K(Ft),gateway:$(),start_time:$(),expiry_time:$(),infinity:$()}),Lu=N({subscription:$u.optional().describe(L.persist),user:Pu.optional().describe(L.persist),slots:Ru.optional().describe(L.session),bundle:zu.optional().describe(L.persist)}).default({}),Du=new ge(Lu);class Tu extends he{constructor(e){super(),this.userStorage=e}get user(){return this.userStorage.state.user??null}get subscription(){return this.userStorage.state.subscription??null}get canUsePremium(){var s,r;const e=((s=this.userStorage.state.user)==null?void 0:s.status)===je.active,n=((r=this.userStorage.state.subscription)==null?void 0:r.status)===Oe.active;return e&&n}get hasBundleSubscription(){var i,o,a,u,l;const e=((i=this.userStorage.state.user)==null?void 0:i.status)===je.active,n=((o=this.userStorage.state.subscription)==null?void 0:o.status)===Oe.active,s=((a=this.userStorage.state.bundle)==null?void 0:a.status)===Oe.active,r=((u=this.userStorage.state.bundle)==null?void 0:u.type)===Ft.antivirus||((l=this.userStorage.state.bundle)==null?void 0:l.type)===Ft.bundle;return e&&n&&s&&r}get userType(){var r,i,o;const e=((r=this.userStorage.state.user)==null?void 0:r.status)===je.active,n=((i=this.userStorage.state.subscription)==null?void 0:i.status)===Oe.active,s=((o=this.userStorage.state.subscription)==null?void 0:o.trial)===Fn.trial;return e&&n&&s?"trial":e&&n?"premium":"free"}get subscriptionSlots(){return this.userStorage.state.slots??null}get subscriptionBundle(){return this.userStorage.state.bundle??null}async boot(){await this.userStorage.sync(),this.bootResolve(),await this.bootPromise}async setUser(e){await this.userStorage.setItems({user:e})}async removeUser(){await this.userStorage.removeItems("user")}async setSubscription(e){await this.userStorage.setItems({subscription:e})}async removeSubscription(){await this.userStorage.removeItems("subscription")}async setSubscriptionSlots(e){await this.userStorage.setItems({slots:e})}async removeSubscriptionSlots(){await this.userStorage.removeItems("slots")}async setSubscriptionBundle(e){await this.userStorage.setItems({bundle:e})}async removeSubscriptionBundle(){await this.userStorage.removeItems("bundle")}hasPermitions(e,n){const r={domain:{free:!0,premium:()=>{var o;return((o=this.userStorage.state.user)==null?void 0:o.status)===je.active}},locations:{free:!0,premium:()=>{var a,u;const i=((a=this.userStorage.state.user)==null?void 0:a.status)===je.active,o=((u=this.userStorage.state.subscription)==null?void 0:u.status)===Oe.active;return i&&o}}}[e][n];return typeof r=="boolean"?r:r()}}const Nu=new ie("user",Du,oe),Qh=new Tu(Nu),Or=["en","ru","vi","uk","pl","it","fr","nl","da","es","de","zh_CN","ar"],zt="en",ju=new Map([["en","English"],["ru","Русский"],["vi","Tiếng Việt"],["uk","Українська"],["pl","Polskie"],["it","Italiano"],["fr","Français"],["nl","Nederlands"],["da","Dansk"],["es","Español"],["de","Deutsche"],["zh_CN","繁體中文"],["ar","العربية"]]),Zu=N({locale:K(Or).optional().describe(L.persist)}).default({}),Mu=new ge(Zu);function Ps(t){return!!(t&&typeof t=="string"&&Or.includes(t))}const Fu={"connect-status":{off:"أنت غير متصل",on:"أنت متصل بـ {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"فشل الاتصال، يرجى تعطيل الملحقات الأخرى.","not-controllable":"فشل الاتصال، ولا يمكن التحكم في وكيل المتصفح.","no-location":"خطأ في الاتصال، موقع الاتصال مفقود.","server-config":"خطأ في الاتصال، لا يمكن جلب تكوين الخادم.",captive:"فشل الاتصال، لا يمكن تأسيس اتصال الوكيل.","no-internet":"خطأ في الاتصال، لا يوجد اتصال بالشبكة."},"disconnect-errors":{"remove-proxy":"خطأ في قطع الاتصال، فشلت عملية إزالة قواعد الوكيل."},"download-notification":{title:"جرّب عميل الوكيل لسطح المكتب الخاص بنا",message:"حماية اتصالك بالإنترنت بالكامل، وليس المتصفح فقط"},"update-notification":{title:"تم تحديث الإضافة",message:"مرحبا بك في {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"يتم التحكم في الإعداد بواسطة ملحق آخر.","not-controllable":"الإعداد لا يمكن التحكم فيه من خلال إعدادات المتصفح الخاص بك.","remove-webrtc":"لا يمكن مسح إعدادات WebRTC."}},Uu=Object.freeze(Object.defineProperty({__proto__:null,default:Fu},Symbol.toStringTag,{value:"Module"})),Vu={"connect-status":{off:"Du er ikke forbundet",on:"Du er forbundet til {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Forbindelsen mislykkedes. Deaktiver venligst andre udvidelser.","not-controllable":"Forbindelsen mislykkedes, browserproxy kan ikke kontrolleres.","no-location":"Forbindelsesfejl, manglende forbindelsesplacering.","server-config":"Forbindelsesfejl, serverkonfigurationen kan ikke hentes.",captive:"Forbindelsen mislykkedes, kan ikke oprette proxyforbindelse.","no-internet":"Forbindelsesfejl, ingen netværksforbindelse."},"disconnect-errors":{"remove-proxy":"Afbrydelsesfejl, fjernelse af proxyregler mislykkedes."},"download-notification":{title:"Prøv vores Desktop Proxy-klient",message:"Beskyt hele din internetforbindelse, ikke kun browseren"},"update-notification":{title:"Udvidelse opdateret",message:"Velkommen til {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Indstilling kontrolleret af anden udvidelse.","not-controllable":"Indstillingen kan ikke kontrolleres via dine browserindstillinger.","remove-webrtc":"Kan ikke rydde WebRTC-indstillinger."}},Bu=Object.freeze(Object.defineProperty({__proto__:null,default:Vu},Symbol.toStringTag,{value:"Module"})),Wu={"connect-status":{off:"Sie sind nicht verbunden",on:"Sie sind mit {{tr_location}} verbunden"},"connect-errors":{"controlled-by-other-extensions":"Die Verbindung ist fehlgeschlagen. Bitte deaktivieren Sie andere Erweiterungen.","not-controllable":"Verbindung fehlgeschlagen, Browser-Proxy ist nicht steuerbar.","no-location":"Verbindungsfehler, Verbindungsstandort fehlt.","server-config":"Verbindungsfehler, Serverkonfiguration kann nicht abgerufen werden.",captive:"Verbindung fehlgeschlagen, Proxy-Verbindung kann nicht hergestellt werden.","no-internet":"Verbindungsfehler, keine Netzwerkverbindung."},"disconnect-errors":{"remove-proxy":"Fehler beim Trennen der Verbindung. Das Entfernen der Proxy-Regeln ist fehlgeschlagen."},"download-notification":{title:"Probieren Sie unseren Desktop-Proxy-Client aus",message:"Schützen Sie Ihre gesamte Internetverbindung, nicht nur den Browser"},"update-notification":{title:"Erweiterung aktualisiert",message:"Willkommen zu {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Einstellung wird von einer anderen Nebenstelle gesteuert.","not-controllable":"Die Einstellung kann nicht über Ihre Browsereinstellungen gesteuert werden.","remove-webrtc":"WebRTC-Einstellungen können nicht gelöscht werden."}},Hu=Object.freeze(Object.defineProperty({__proto__:null,default:Wu},Symbol.toStringTag,{value:"Module"})),Ku={"connect-status":{off:"You are not connected",on:"You are connected to {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connection failed. Please disable other extensions.","not-controllable":"Connection failed. Browser proxy is not controllable.","no-location":"Connection Error. Missing connection location.","server-config":"Connection Error. Can't fetch server config.",captive:"Connection failed. Cannot establish proxy connection.","no-internet":"Connection Error. No Network connection."},"disconnect-errors":{"remove-proxy":"Disconnect Error. Proxy rules remove failed."},"download-notification":{title:"Try our Desktop Proxy Client",message:"Protect your entire internet connection, not just browser"},"update-notification":{title:"Extension updated",message:"Welcome to {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Setting controlled by other extension.","not-controllable":"Setting not controllable through your browser settings.","remove-webrtc":"Can't clear WebRTC settings."}},qu=Object.freeze(Object.defineProperty({__proto__:null,default:Ku},Symbol.toStringTag,{value:"Module"})),Gu={"connect-status":{off:"No está conectado",on:"Estás conectado a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La conexión falló. Desactive otras extensiones.","not-controllable":"La conexión falló, el proxy del navegador no es controlable.","no-location":"Error de conexión, falta ubicación de conexión.","server-config":"Error de conexión, no se puede recuperar la configuración del servidor.",captive:"La conexión falló, no se puede establecer la conexión proxy.","no-internet":"Error de conexión, sin conexión de red."},"disconnect-errors":{"remove-proxy":"Error de desconexión, error al eliminar las reglas de proxy."},"download-notification":{title:"Prueba nuestro Cliente Proxy de Escritorio",message:"Proteja toda su conexión a Internet, no sólo el navegador"},"update-notification":{title:"Extensión actualizada",message:"Bienvenido a {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Configuración controlada por otra extensión.","not-controllable":"Configuración no controlable a través de la configuración de su navegador.","remove-webrtc":"No se puede borrar la configuración de WebRTC."}},Ju=Object.freeze(Object.defineProperty({__proto__:null,default:Gu},Symbol.toStringTag,{value:"Module"})),Yu={"connect-status":{off:"Vous n'êtes pas connecté",on:"Vous êtes connecté à {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La connexion a échoué. Veuillez désactiver les autres extensions.","not-controllable":"La connexion a échoué, le proxy du navigateur n'est pas contrôlable.","no-location":"Erreur de connexion, emplacement de connexion manquant.","server-config":"Erreur de connexion, impossible de récupérer la configuration du serveur.",captive:"Échec de la connexion, impossible d'établir une connexion proxy.","no-internet":"Erreur de connexion, pas de connexion réseau."},"disconnect-errors":{"remove-proxy":"Erreur de déconnexion. La suppression des règles de proxy a échoué."},"download-notification":{title:"Essayez notre client Proxy de bureau",message:"Protégez l'ensemble de votre connexion Internet, et pas seulement votre navigateur"},"update-notification":{title:"Extension mise à jour",message:"Bienvenue à {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Paramètre contrôlé par une autre extension.","not-controllable":"Paramètre non contrôlable via les paramètres de votre navigateur.","remove-webrtc":"Impossible d'effacer les paramètres WebRTC."}},Xu=Object.freeze(Object.defineProperty({__proto__:null,default:Yu},Symbol.toStringTag,{value:"Module"})),Qu={"connect-status":{off:"Non siete connessi",on:"Sei connesso a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connessione non riuscita. Disattiva le altre estensioni.","not-controllable":"Connessione non riuscita, il proxy del browser non è controllabile.","no-location":"Errore di connessione, posizione della connessione mancante.","server-config":"Errore di connessione, impossibile recuperare la configurazione del server.",captive:"Connessione non riuscita, impossibile stabilire una connessione proxy.","no-internet":"Errore di connessione, nessuna connessione di rete."},"disconnect-errors":{"remove-proxy":"Errore di disconnessione, rimozione delle regole proxy non riuscita."},"download-notification":{title:"Prova il nostro Client Proxy Desktop",message:"Proteggere l'intera connessione a Internet, non solo il browser"},"update-notification":{title:"Estensione aggiornata",message:"Benvenuto a {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Impostazione controllata da un altro interno.","not-controllable":"Impostazione non controllabile tramite le impostazioni del browser.","remove-webrtc":"Impossibile cancellare le impostazioni WebRTC."}},el=Object.freeze(Object.defineProperty({__proto__:null,default:Qu},Symbol.toStringTag,{value:"Module"})),tl={"connect-status":{off:"U bent niet verbonden",on:"Je bent verbonden met {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Verbinding mislukt. Schakel andere extensies uit.","not-controllable":"Verbinding mislukt, browserproxy kan niet worden beheerd.","no-location":"Verbindingsfout, ontbrekende verbindingslocatie.","server-config":"Verbindingsfout, kan serverconfiguratie niet ophalen.",captive:"Verbinding mislukt. Kan geen proxyverbinding tot stand brengen.","no-internet":"Verbindingsfout, geen netwerkverbinding."},"disconnect-errors":{"remove-proxy":"Verbindingsfout, verwijderen van proxyregels mislukt."},"download-notification":{title:"Probeer onze Desktop Proxy Client",message:"Bescherm je hele internetverbinding, niet alleen je browser"},"update-notification":{title:"Extensie bijgewerkt",message:"Welkom bij {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Instelling beheerd door een ander toestel.","not-controllable":"Instelling kan niet worden beheerd via uw browserinstellingen.","remove-webrtc":"Kan WebRTC-instellingen niet wissen."}},nl=Object.freeze(Object.defineProperty({__proto__:null,default:tl},Symbol.toStringTag,{value:"Module"})),sl={"connect-status":{off:"Nie jesteś połączony",on:"Jesteś połączony z {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Połączenie nie powiodło się. Wyłącz inne rozszerzenia.","not-controllable":"Połączenie nie powiodło się, nie można kontrolować serwera proxy przeglądarki.","no-location":"Błąd połączenia, brak lokalizacji połączenia.","server-config":"Błąd połączenia. Nie można pobrać konfiguracji serwera.",captive:"Połączenie nie powiodło się. Nie można nawiązać połączenia proxy.","no-internet":"Błąd połączenia, brak połączenia sieciowego."},"disconnect-errors":{"remove-proxy":"Błąd rozłączenia, usunięcie reguł proxy nie powiodło się."},"download-notification":{title:"Wypróbuj nasz Klient Proxy na Pulpit",message:"Ochrona całego połączenia internetowego, nie tylko przeglądarki"},"update-notification":{title:"Rozszerzenie zaktualizowane",message:"Witamy w {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Ustawienie kontrolowane przez inne rozszerzenie.","not-controllable":"Ustawienie, którego nie można kontrolować za pomocą ustawień przeglądarki.","remove-webrtc":"Nie można wyczyścić ustawień WebRTC."}},rl=Object.freeze(Object.defineProperty({__proto__:null,default:sl},Symbol.toStringTag,{value:"Module"})),il={"connect-status":{off:"Вы не подключены",on:"Вы подключены к {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Не удалось подключиться. Отключите другие расширения.","not-controllable":"Соединение не удалось, прокси-сервер браузера не контролируется.","no-location":"Ошибка подключения, отсутствует место подключения.","server-config":"Ошибка подключения. Невозможно получить конфигурацию сервера.",captive:"Не удалось установить соединение. Невозможно установить прокси-соединение.","no-internet":"Ошибка подключения. Нет подключения к сети."},"disconnect-errors":{"remove-proxy":"Ошибка отключения. Не удалось удалить правила прокси."},"download-notification":{title:"Попробуйте наш Desktop Proxy Client",message:"Защитите все свое интернет-соединение, а не только браузер"},"update-notification":{title:"Расширение обновлено",message:"Добро пожаловать в {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Настройка контролируется другим расширением.","not-controllable":"Настройка не контролируема через настройки вашего браузера.","remove-webrtc":"Не удалось очистить настройки WebRTC."}},ol=Object.freeze(Object.defineProperty({__proto__:null,default:il},Symbol.toStringTag,{value:"Module"})),al={"connect-status":{off:"Ви не підключені",on:"Ви підключені до {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Помилка підключення. Вимкніть інші розширення.","not-controllable":"Помилка підключення, проксі-сервер веб-переглядача неможливо контролювати.","no-location":"Помилка підключення, відсутнє місце підключення.","server-config":"Помилка підключення, не вдається отримати конфігурацію сервера.",captive:"Помилка з’єднання, неможливо встановити проксі-з’єднання.","no-internet":"Помилка підключення. Відсутнє інтернет з'єднання."},"disconnect-errors":{"remove-proxy":"Помилка відключення, не вдалося видалити правила проксі."},"download-notification":{title:"Спробуйте наш Desktop Proxy Client",message:"Повністю захистіть підключення до Інтернету, а не лише через браузер"},"update-notification":{title:"Розширення оновлено",message:"Ласкаво просимо до {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Налаштування контролюється іншим розширенням.","not-controllable":"Налаштування не контрольоване через налаштування вашого браузера.","remove-webrtc":"Не вдається очистити налаштування WebRTC."}},cl=Object.freeze(Object.defineProperty({__proto__:null,default:al},Symbol.toStringTag,{value:"Module"})),ul={"connect-status":{off:"Bạn chưa được kết nối",on:"Bạn được kết nối với {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Kết nối không thành công, vui lòng tắt các tiện ích mở rộng khác.","not-controllable":"Kết nối không thành công, proxy trình duyệt không thể kiểm soát được.","no-location":"Lỗi kết nối, Thiếu vị trí kết nối.","server-config":"Lỗi kết nối, Không thể tìm nạp cấu hình máy chủ.",captive:"Kết nối không thành công, Không thể thiết lập kết nối proxy.","no-internet":"Lỗi kết nối, Không có kết nối mạng."},"disconnect-errors":{"remove-proxy":"Lỗi ngắt kết nối, xóa quy tắc proxy không thành công."},"download-notification":{title:"Thử dùng Ứng dụng Máy tính để bàn Proxy của chúng tôi",message:"Bảo vệ toàn bộ kết nối internet của bạn, không chỉ trình duyệt"},"update-notification":{title:"Đã cập nhật tiện ích mở rộng",message:"Chào mừng bạn đến {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"Cài đặt được kiểm soát bởi tiện ích mở rộng khác.","not-controllable":"Cài đặt không thể kiểm soát được thông qua cài đặt trình duyệt của bạn.","remove-webrtc":"Không thể xóa cài đặt WebRTC."}},ll=Object.freeze(Object.defineProperty({__proto__:null,default:ul},Symbol.toStringTag,{value:"Module"})),hl={"connect-status":{off:"您尚未连接",on:"您已连接到 {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"连接失败，请禁用其他扩展。","not-controllable":"连接失败，浏览器代理不受控制。","no-location":"连接错误，缺少连接位置。","server-config":"连接错误，无法获取服务器配置。",captive:"连接失败，无法建立代理连接。","no-internet":"连接错误，无网络连接。"},"disconnect-errors":{"remove-proxy":"断开连接错误，代理规则删除失败。"},"download-notification":{title:"试试我们的桌面代理客户端",message:"保护您的整个互联网连接，而不仅仅是浏览器"},"update-notification":{title:"扩展已更新",message:"欢迎来到 {{tr_version}}"},"webrtc-errors":{"controlled-by-other-extensions":"由其他分机控制的设置。","not-controllable":"无法通过浏览器设置控制设置。","remove-webrtc":"无法清除 WebRTC 设置。"}},dl=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"}));class Ut extends he{constructor(n){super();Z(this,"translator",ne);this.i18nStorage=n}get activeLocale(){return this.i18nStorage.state.locale??zt}get languageList(){return[...ju.entries()].map(([n,s])=>({code:n,label:s}))}async boot(){if(await this.i18nStorage.sync(),!this.i18nStorage.state.locale){const s=Ut.getUILanguage();await this.setLocale(s)}const n=Ut.buildResources();await this.translator.init({resources:n,lng:this.activeLocale,fallbackLng:zt,interpolation:{escapeValue:!1}}),this.bootResolve(),await this.bootPromise}t(n,s={}){return this.translator.t(n,s)}async setLocale(n){await this.i18nStorage.setItems({locale:n})}static getUILanguage(){const n=M.i18n.getUILanguage(),s=n.replaceAll("-","_");if(Ps(s))return s;const r=n.substring(0,2);return Ps(r)?r:zt}static buildResources(){return Object.entries(Object.assign({"./locales/ar/base.json":Uu,"./locales/da/base.json":Bu,"./locales/de/base.json":Hu,"./locales/en/base.json":qu,"./locales/es/base.json":Ju,"./locales/fr/base.json":Xu,"./locales/it/base.json":el,"./locales/nl/base.json":nl,"./locales/pl/base.json":rl,"./locales/ru/base.json":ol,"./locales/uk/base.json":cl,"./locales/vi/base.json":ll,"./locales/zh_CN/base.json":dl})).reduce((s,[r,i])=>{const o=r.split("/").at(-2),a=r.split("/").at(-1).split(".").at(0);return s[o]={...s[o],[a]:i.default},s},{})}}const pl=new ie("i18n",Mu,oe),fl=new Ut(pl),Rs="chrome",gl="app",ml="chrome_extension",un={pricing:"https://veepn.com/{lang_code}/vpn-pricing/extension/",pricingPayment:"https://order.veepn.com/{lang_code}/pricing/payment/extension/",pricingSecurity:"https://order.veepn.com/{lang_code}/pricing/subscription/security/",pricingDiscount:"https://order.veepn.com/{lang_code}/pricing/60off/",home:"https://veepn.com/{lang_code}/",install:`https://veepn.com/{lang_code}/welcome/${Rs}/`,uninstall:`https://veepn.com/{lang_code}/uninstall/${Rs}/1/`,ipDetails:"https://veepn.com/{lang_code}/what-is-my-ip/",privacyPolicy:"https://veepn.com/{lang_code}/privacy-policy/",termsOfService:"https://veepn.com/{lang_code}/terms-of-service/",update:"https://veepn.com/{lang_code}/upgrade/",breachAlert:"https://veepn.com/{lang_code}/alert/",support:"https://help.veepn.com/hc/en-us/",supportTroubleshooting:"https://help.veepn.com/hc/en-us/categories/19479919000338-Troubleshooting",accountAuth:"https://account.veepn.com/{lang_code}/account-auth/",accountPasswordRecovery:"https://account.veepn.com/{lang_code}/password-recovery/"},bl=["de","ar","th","vi","en","es","fr","id","hi","it","jp","nl","no","pl","pt","ru","se","tr","zh","uk"],vl="en";class wl extends he{constructor(e,n){super(),this.globalStateService=e,this.i18nService=n}get websiteLangCode(){const e=this.i18nService.activeLocale.split("_")[0];return bl.find(s=>s===e)??vl}async boot(){this.bootResolve(),await this.bootPromise}async proceedToWebsiteAccount(e){const n=this.constructUrl(un.accountAuth+e.authToken,e.route,e.params);await M.tabs.create({url:n})}async proceedToWebsitePage(e){const n=this.constructUrl(un[e.page],"",e.params);await M.tabs.create({url:n})}async setUninstallURL(){const e=this.constructUrl(un.uninstall,"");await M.runtime.setUninstallURL(e)}constructUrl(e,n,s){const r=new URLSearchParams({utm_source:ml,utm_medium:gl,platform:"extension",udid:this.globalStateService.udid.value,...s??{}}),i=this.websiteLangCode===zt?e.replace("/{lang_code}",""):e.replace("{lang_code}",this.websiteLangCode);if(n)return`${i}/?route=${encodeURIComponent(`${n}?${r.toString()}`)}`;const o=new URL(i);return r.forEach((a,u)=>{o.searchParams.set(u,a)}),o.toString()}}const ed=new wl(Jt,fl),$r="default",yl=[$r,"light","dark"],Pr=14*24*60*60*1e3,xl=16*24*60*60*1e3,_l="app",Sl="chrome_extension",Al={macos:"https://download.veepn.com/mac/VeePN.dmg",windows:"https://download.veepn.com/windows/VeePNInstaller.exe",linux:"https://veepn.com/vpn-apps/vpn-for-linux/",other:`https://order.veepn.com/pricing/extension/?utm_source=${Sl}&utm_medium=${_l}&utm_campaign=download`},kl=7*24*60*60*1e3,Cl="https://www.cloudflare.com/cdn-cgi/trace",El=20*60*1e3,Il=7*24*60*60*1e3,Ol=4,$l="https://chromewebstore.google.com/detail/free-vpn-for-chrome-vpn-p/_runtime_id_/reviews",Pl=15*60*1e3,Rl=24*60*60*1e3,zl=24*60*60*1e3,Ll=N({country:U(),region:U()}),Dl=N({needShow:ee(),nextTimestamp:$(),showCount:$()}),Tl=N({needShow:ee()}),Nl=N({needShow:ee(),count:$(),nextTimestamp:$()}),jl=N({close:Nl,active:ee(),nextTimestamp:$()}),Zl=N({active:ee()}),Ml=N({active:ee()}),Fl=N({active:ee()}),Ul=N({active:ee(),nextTimestamp:$()}),Vl=N({active:ee(),nextTimestamp:$()}),Bl=N({colorTheme:K(yl).describe(L.persist),showOnboarding:ee().describe(L.persist),sessionCount:$().describe(L.persist),downloadNotificationTimestamp:$().describe(L.persist),geolocation:Ll.optional().describe(L.persist),blockAds:ee().describe(L.persist),rateUs:Dl.describe(L.persist),exitOffer:Tl.describe(L.persist),connectionSurvey:jl.describe(L.persist),banner2Session:Zl.describe(L.persist),banner3Connection:Ml.describe(L.persist),banner15Connection:Fl.describe(L.persist),banner14Days:Ul.describe(L.persist),banner16Days:Vl.describe(L.persist)}).default({colorTheme:$r,showOnboarding:!0,sessionCount:0,downloadNotificationTimestamp:0,blockAds:!1,rateUs:{needShow:!0,nextTimestamp:Date.now()+El,showCount:1},exitOffer:{needShow:!0},connectionSurvey:{close:{needShow:!0,count:0,nextTimestamp:Date.now()},active:!0,nextTimestamp:Date.now()},banner2Session:{active:!0},banner3Connection:{active:!0},banner15Connection:{active:!0},banner14Days:{active:!1,nextTimestamp:Date.now()+Pr},banner16Days:{active:!0,nextTimestamp:Date.now()+xl}}),Wl=new ge(Bl);var Hl="2.0.4",En=500,zs="user-agent",Je="",Ls="?",Vt="function",Pe="undefined",Ye="object",In="string",ce="browser",Se="cpu",we="device",me="engine",fe="os",qe="result",S="name",b="type",_="vendor",A="version",ue="architecture",yt="major",x="model",lt="console",z="mobile",F="tablet",X="smarttv",be="wearable",It="xr",ht="embedded",st="inapp",Un="brands",Ze="formFactors",Vn="fullVersionList",Ge="platform",Bn="platformVersion",Qt="bitness",De="sec-ch-ua",Kl=De+"-full-version-list",ql=De+"-arch",Gl=De+"-"+Qt,Jl=De+"-form-factors",Yl=De+"-"+z,Xl=De+"-"+x,Rr=De+"-"+Ge,Ql=Rr+"-version",zr=[Un,Vn,z,x,Ge,Bn,ue,Ze,Qt],Ot="Amazon",We="Apple",Ds="ASUS",Ts="BlackBerry",Ne="Google",Ns="Huawei",ln="Lenovo",js="Honor",$t="LG",hn="Microsoft",dn="Motorola",pn="Nvidia",Zs="OnePlus",fn="OPPO",rt="Samsung",Ms="Sharp",it="Sony",gn="Xiaomi",mn="Zebra",Fs="Chrome",Us="Chromium",Ee="Chromecast",Lt="Edge",ot="Firefox",at="Opera",bn="Facebook",Vs="Sogou",He="Mobile ",ct=" Browser",On="Windows",eh=typeof window!==Pe,le=eh&&window.navigator?window.navigator:void 0,$e=le&&le.userAgentData?le.userAgentData:void 0,th=function(t,e){var n={},s=e;if(!Bt(e)){s={};for(var r in e)for(var i in e[r])s[i]=e[r][i].concat(s[i]?s[i]:[])}for(var o in t)n[o]=s[o]&&s[o].length%2===0?s[o].concat(t[o]):t[o];return n},en=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},$n=function(t,e){if(typeof t===Ye&&t.length>0){for(var n in t)if(Ae(e)==Ae(t[n]))return!0;return!1}return Qe(t)?Ae(e)==Ae(t):!1},Bt=function(t,e){for(var n in t)return/^(browser|cpu|device|engine|os)$/.test(n)||(e?Bt(t[n]):!1)},Qe=function(t){return typeof t===In},vn=function(t){if(t){for(var e=[],n=Xe(/\\?\"/g,t).split(","),s=0;s<n.length;s++)if(n[s].indexOf(";")>-1){var r=Wt(n[s]).split(";v=");e[s]={brand:r[0],version:r[1]}}else e[s]=Wt(n[s]);return e}},Ae=function(t){return Qe(t)?t.toLowerCase():t},wn=function(t){return Qe(t)?Xe(/[^\d\.]/g,t).split(".")[0]:void 0},ke=function(t){for(var e in t){var n=t[e];typeof n==Ye&&n.length==2?this[n[0]]=n[1]:this[n]=void 0}return this},Xe=function(t,e){return Qe(e)?e.replace(t,Je):e},ut=function(t){return Xe(/\\?\"/g,t)},Wt=function(t,e){if(Qe(t))return t=Xe(/^\s\s*/,t),typeof e===Pe?t:t.substring(0,En)},yn=function(t,e){if(!(!t||!e))for(var n=0,s,r,i,o,a,u;n<e.length&&!a;){var l=e[n],g=e[n+1];for(s=r=0;s<l.length&&!a&&l[s];)if(a=l[s++].exec(t),a)for(i=0;i<g.length;i++)u=a[++r],o=g[i],typeof o===Ye&&o.length>0?o.length===2?typeof o[1]==Vt?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:o.length>=3&&(typeof o[1]===Vt&&!(o[1].exec&&o[1].test)?o.length>3?this[o[0]]=u?o[1].apply(this,o.slice(2)):void 0:this[o[0]]=u?o[1].call(this,u,o[2]):void 0:o.length==3?this[o[0]]=u?u.replace(o[1],o[2]):void 0:o.length==4?this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):void 0:o.length>4&&(this[o[0]]=u?o[3].apply(this,[u.replace(o[1],o[2])].concat(o.slice(4))):void 0)):this[o]=u||void 0;n+=2}},ve=function(t,e){for(var n in e)if(typeof e[n]===Ye&&e[n].length>0){for(var s=0;s<e[n].length;s++)if($n(e[n][s],t))return n===Ls?void 0:n}else if($n(e[n],t))return n===Ls?void 0:n;return e.hasOwnProperty("*")?e["*"]:t},Bs={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2","8.1":"6.3",10:["6.4","10.0"],NT:""},Ws={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},nh={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},Hs={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[A,[S,He+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[A,[S,Lt+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[A,[S,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[S,A],[/opios[\/ ]+([\w\.]+)/i],[A,[S,at+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[A,[S,at+" GX"]],[/\bopr\/([\w\.]+)/i],[A,[S,at]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[A,[S,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[A,[S,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[S,A],[/quark(?:pc)?\/([-\w\.]+)/i],[A,[S,"Quark"]],[/\bddg\/([\w\.]+)/i],[A,[S,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[A,[S,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[A,[S,"WeChat"]],[/konqueror\/([\w\.]+)/i],[A,[S,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[A,[S,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[A,[S,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[A,[S,"Smart "+ln+ct]],[/(avast|avg)\/([\w\.]+)/i],[[S,/(.+)/,"$1 Secure"+ct],A],[/\bfocus\/([\w\.]+)/i],[A,[S,ot+" Focus"]],[/\bopt\/([\w\.]+)/i],[A,[S,at+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[A,[S,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[A,[S,"Dolphin"]],[/coast\/([\w\.]+)/i],[A,[S,at+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[A,[S,"MIUI"+ct]],[/fxios\/([\w\.-]+)/i],[A,[S,He+ot]],[/\bqihoobrowser\/?([\w\.]*)/i],[A,[S,"360"]],[/\b(qq)\/([\w\.]+)/i],[[S,/(.+)/,"$1Browser"],A],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[S,/(.+)/,"$1"+ct],A],[/samsungbrowser\/([\w\.]+)/i],[A,[S,rt+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[A,[S,Vs+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[S,Vs+" Mobile"],A],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[S,A],[/(lbbrowser|rekonq)/i],[S],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[A,S],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[S,bn],A,[b,st]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[S,A,[b,st]],[/\bgsa\/([\w\.]+) .*safari\//i],[A,[S,"GSA"],[b,st]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[A,[S,"TikTok"],[b,st]],[/\[(linkedin)app\]/i],[S,[b,st]],[/(chromium)[\/ ]([-\w\.]+)/i],[S,A],[/headlesschrome(?:\/([\w\.]+)| )/i],[A,[S,Fs+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[A,[S,Lt+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[S,Fs+" WebView"],A],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[A,[S,"Android"+ct]],[/chrome\/([\w\.]+) mobile/i],[A,[S,He+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[S,A],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[A,[S,He+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[S,He+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[A,S],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[S,[A,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[S,A],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[S,He+ot],A],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[S,"Netscape"],A],[/(wolvic|librewolf)\/([\w\.]+)/i],[S,A],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[A,[S,ot+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[S,[A,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[S,[A,/[^\d\.]+./,Je]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[ue,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[ue,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[ue,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[ue,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[ue,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[ue,/ower/,Je,Ae]],[/ sun4\w[;\)]/i],[[ue,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[ue,Ae]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[x,[_,rt],[b,F]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[x,[_,rt],[b,z]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[x,[_,We],[b,z]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[x,[_,We],[b,F]],[/(macintosh);/i],[x,[_,We]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[x,[_,Ms],[b,z]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[x,[_,js],[b,F]],[/honor([-\w ]+)[;\)]/i],[x,[_,js],[b,z]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[x,[_,Ns],[b,F]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[x,[_,Ns],[b,z]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[x,/_/g," "],[_,gn],[b,F]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[x,/_/g," "],[_,gn],[b,z]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[x,[_,Zs],[b,z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[x,[_,fn],[b,z]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[x,[_,ve,{OnePlus:["203","304","403","404","413","415"],"*":fn}],[b,F]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[x,[_,"BLU"],[b,z]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[x,[_,"Vivo"],[b,z]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[x,[_,"Realme"],[b,z]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[x,[_,ln],[b,F]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[x,[_,ln],[b,z]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[x,[_,dn],[b,z]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[x,[_,dn],[b,F]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[x,[_,$t],[b,F]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[x,[_,$t],[b,z]],[/(nokia) (t[12][01])/i],[_,x,[b,F]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[x,/_/g," "],[b,z],[_,"Nokia"]],[/(pixel (c|tablet))\b/i],[x,[_,Ne],[b,F]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[x,[_,Ne],[b,z]],[/(google) (pixelbook( go)?)/i],[_,x],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[x,[_,it],[b,z]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[x,"Xperia Tablet"],[_,it],[b,F]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[x,[_,Ot],[b,F]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[x,/(.+)/g,"Fire Phone $1"],[_,Ot],[b,z]],[/(playbook);[-\w\),; ]+(rim)/i],[x,_,[b,F]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[x,[_,Ts],[b,z]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[x,[_,Ds],[b,F]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[x,[_,Ds],[b,z]],[/(nexus 9)/i],[x,[_,"HTC"],[b,F]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[x,/_/g," "],[b,z]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[x,[_,"TCL"],[b,F]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[x,[_,"TCL"],[b,z]],[/(itel) ((\w+))/i],[[_,Ae],x,[b,ve,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[x,[_,"Acer"],[b,F]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[x,[_,"Meizu"],[b,z]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[x,[_,"Ulefone"],[b,z]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[x,[_,"Energizer"],[b,z]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[x,[_,"Cat"],[b,z]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[x,[_,"Smartfren"],[b,z]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[x,[_,"Nothing"],[b,z]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[x,[_,"Archos"],[b,F]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[x,[_,"Archos"],[b,z]],[/; (n159v)/i],[x,[_,"HMD"],[b,z]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[_,x,[b,F]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i],[_,x,[b,z]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[_,x,[b,F]],[/(surface duo)/i],[x,[_,hn],[b,F]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[x,[_,"Fairphone"],[b,z]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[x,[_,pn],[b,F]],[/(sprint) (\w+)/i],[_,x,[b,z]],[/(kin\.[onetw]{3})/i],[[x,/\./g," "],[_,hn],[b,z]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[x,[_,mn],[b,F]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[x,[_,mn],[b,z]],[/smart-tv.+(samsung)/i],[_,[b,X]],[/hbbtv.+maple;(\d+)/i],[[x,/^/,"SmartTV"],[_,rt],[b,X]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[_,x,[b,X]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,$t],[b,X]],[/(apple) ?tv/i],[_,[x,We+" TV"],[b,X]],[/crkey.*devicetype\/chromecast/i],[[x,Ee+" Third Generation"],[_,Ne],[b,X]],[/crkey.*devicetype\/([^/]*)/i],[[x,/^/,"Chromecast "],[_,Ne],[b,X]],[/fuchsia.*crkey/i],[[x,Ee+" Nest Hub"],[_,Ne],[b,X]],[/crkey/i],[[x,Ee],[_,Ne],[b,X]],[/(portaltv)/i],[x,[_,bn],[b,X]],[/droid.+aft(\w+)( bui|\))/i],[x,[_,Ot],[b,X]],[/(shield \w+ tv)/i],[x,[_,pn],[b,X]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[x,[_,Ms],[b,X]],[/(bravia[\w ]+)( bui|\))/i],[x,[_,it],[b,X]],[/(mi(tv|box)-?\w+) bui/i],[x,[_,gn],[b,X]],[/Hbbtv.*(technisat) (.*);/i],[_,x,[b,X]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,/.+\/(\w+)/,"$1",ve,{LG:"lge"}],[x,Wt],[b,X]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[x,[b,X]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:|large screen[\w ]+safari)\b/i],[[b,X]],[/(playstation \w+)/i],[x,[_,it],[b,lt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[x,[_,hn],[b,lt]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i],[_,x,[b,lt]],[/droid.+; (shield)( bui|\))/i],[x,[_,pn],[b,lt]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[x,[_,rt],[b,be]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[_,x,[b,be]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[x,[_,fn],[b,be]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[x,[_,We],[b,be]],[/(opwwe\d{3})/i],[x,[_,Zs],[b,be]],[/(moto 360)/i],[x,[_,dn],[b,be]],[/(smartwatch 3)/i],[x,[_,it],[b,be]],[/(g watch r)/i],[x,[_,$t],[b,be]],[/droid.+; (wt63?0{2,3})\)/i],[x,[_,mn],[b,be]],[/droid.+; (glass) \d/i],[x,[_,Ne],[b,It]],[/(pico) (4|neo3(?: link|pro)?)/i],[_,x,[b,It]],[/(quest( \d| pro)?s?).+vr/i],[x,[_,bn],[b,It]],[/mobile vr; rv.+firefox/i],[[b,It]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[b,ht]],[/(aeobc)\b/i],[x,[_,Ot],[b,ht]],[/(homepod).+mac os/i],[x,[_,We],[b,ht]],[/windows iot/i],[[b,ht]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[x,[b,ve,{mobile:"Mobile",xr:"VR","*":F}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[b,F]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[b,z]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[x,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[A,[S,Lt+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[S,A],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[A,[S,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[S,A],[/ladybird\//i],[[S,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[A,S]],os:[[/(windows nt) (6\.[23]); arm/i],[[S,/N/,"R"],[A,ve,Bs]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[S,A],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[A,/(;|\))/g,"",ve,Bs],[S,On]],[/(windows ce)\/?([\d\.]*)/i],[S,A],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[A,/_/g,"."],[S,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[S,"macOS"],[A,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[A,[S,Ee+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[A,[S,Ee+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[A,[S,Ee+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[A,[S,Ee+" Linux"]],[/crkey\/([\d\.]+)/i],[A,[S,Ee]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[A,S],[/(ubuntu) ([\w\.]+) like android/i],[[S,/(.+)/,"$1 Touch"],A],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[S,A],[/\(bb(10);/i],[A,[S,Ts]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[A,[S,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[A,[S,ot+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[A,[S,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[A,ve,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[S,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[A,[S,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[S,"Chrome OS"],A],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[S,A],[/(sunos) ?([\d\.]*)/i],[[S,"Solaris"],A],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[S,A]]},Pt=function(){var t={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return ke.call(t.init,[[ce,[S,A,yt,b]],[Se,[ue]],[we,[b,x,_]],[me,[S,A]],[fe,[S,A]]]),ke.call(t.isIgnore,[[ce,[A,yt]],[me,[A]],[fe,[A]]]),ke.call(t.isIgnoreRgx,[[ce,/ ?browser$/i],[fe,/ ?os$/i]]),ke.call(t.toString,[[ce,[S,A]],[Se,[ue]],[we,[_,x]],[me,[S,A]],[fe,[S,A]]]),t}(),sh=function(t,e){var n=Pt.init[e],s=Pt.isIgnore[e]||0,r=Pt.isIgnoreRgx[e]||0,i=Pt.toString[e]||0;function o(){ke.call(this,n)}return o.prototype.getItem=function(){return t},o.prototype.withClientHints=function(){return $e?$e.getHighEntropyValues(zr).then(function(a){return t.setCH(new Lr(a,!1)).parseCH().get()}):t.parseCH().get()},o.prototype.withFeatureCheck=function(){return t.detectFeature().get()},e!=qe&&(o.prototype.is=function(a){var u=!1;for(var l in this)if(this.hasOwnProperty(l)&&!$n(s,l)&&Ae(r?Xe(r,this[l]):this[l])==Ae(r?Xe(r,a):a)){if(u=!0,a!=Pe)break}else if(a==Pe&&u){u=!u;break}return u},o.prototype.toString=function(){var a=Je;for(var u in i)typeof this[i[u]]!==Pe&&(a+=(a?" ":Je)+this[i[u]]);return a||Pe}),$e||(o.prototype.then=function(a){var u=this,l=function(){for(var d in u)u.hasOwnProperty(d)&&(this[d]=u[d])};l.prototype={is:o.prototype.is,toString:o.prototype.toString};var g=new l;return a(g),g}),new o};function Lr(t,e){if(t=t||{},ke.call(this,zr),e)ke.call(this,[[Un,vn(t[De])],[Vn,vn(t[Kl])],[z,/\?1/.test(t[Yl])],[x,ut(t[Xl])],[Ge,ut(t[Rr])],[Bn,ut(t[Ql])],[ue,ut(t[ql])],[Ze,vn(t[Jl])],[Qt,ut(t[Gl])]]);else for(var n in t)this.hasOwnProperty(n)&&typeof t[n]!==Pe&&(this[n]=t[n])}function Ks(t,e,n,s){return this.get=function(r){return r?this.data.hasOwnProperty(r)?this.data[r]:void 0:this.data},this.set=function(r,i){return this.data[r]=i,this},this.setCH=function(r){return this.uaCH=r,this},this.detectFeature=function(){if(le&&le.userAgent==this.ua)switch(this.itemType){case ce:le.brave&&typeof le.brave.isBrave==Vt&&this.set(S,"Brave");break;case we:!this.get(b)&&$e&&$e[z]&&this.set(b,z),this.get(x)=="Macintosh"&&le&&typeof le.standalone!==Pe&&le.maxTouchPoints&&le.maxTouchPoints>2&&this.set(x,"iPad").set(b,F);break;case fe:!this.get(S)&&$e&&$e[Ge]&&this.set(S,$e[Ge]);break;case qe:var r=this.data,i=function(o){return r[o].getItem().detectFeature().get()};this.set(ce,i(ce)).set(Se,i(Se)).set(we,i(we)).set(me,i(me)).set(fe,i(fe))}return this},this.parseUA=function(){return this.itemType!=qe&&yn.call(this.data,this.ua,this.rgxMap),this.itemType==ce&&this.set(yt,wn(this.get(A))),this},this.parseCH=function(){var r=this.uaCH,i=this.rgxMap;switch(this.itemType){case ce:case me:var o=r[Vn]||r[Un],a;if(o)for(var u in o){var l=o[u].brand||o[u],g=o[u].version;this.itemType==ce&&!/not.a.brand/i.test(l)&&(!a||/Chrom/.test(a)&&l!=Us||a==Lt&&/WebView2/.test(l))&&(l=ve(l,nh),a=this.get(S),a&&!/Chrom/.test(a)&&/Chrom/.test(l)||this.set(S,l).set(A,g).set(yt,wn(g)),a=l),this.itemType==me&&l==Us&&this.set(A,g)}break;case Se:var d=r[ue];d&&(d&&r[Qt]=="64"&&(d+="64"),yn.call(this.data,d+";",i));break;case we:if(r[z]&&this.set(b,z),r[x]&&(this.set(x,r[x]),!this.get(b)||!this.get(_))){var k={};yn.call(k,"droid 9; "+r[x]+")",i),!this.get(b)&&k.type&&this.set(b,k.type),!this.get(_)&&k.vendor&&this.set(_,k.vendor)}if(r[Ze]){var p;if(typeof r[Ze]!="string")for(var c=0;!p&&c<r[Ze].length;)p=ve(r[Ze][c++],Ws);else p=ve(r[Ze],Ws);this.set(b,p)}break;case fe:var h=r[Ge];if(h){var m=r[Bn];h==On&&(m=parseInt(wn(m),10)>=13?"11":"10"),this.set(S,h).set(A,m)}this.get(S)==On&&r[x]=="Xbox"&&this.set(S,"Xbox").set(A,void 0);break;case qe:var f=this.data,w=function(y){return f[y].getItem().setCH(r).parseCH().get()};this.set(ce,w(ce)).set(Se,w(Se)).set(we,w(we)).set(me,w(me)).set(fe,w(fe))}return this},ke.call(this,[["itemType",t],["ua",e],["uaCH",s],["rgxMap",n],["data",sh(this,t)]]),this}function xe(t,e,n){if(typeof t===Ye?(Bt(t,!0)?(typeof e===Ye&&(n=e),e=t):(n=t,e=void 0),t=void 0):typeof t===In&&!Bt(e,!0)&&(n=e,e=void 0),n&&typeof n.append===Vt){var s={};n.forEach(function(u,l){s[l]=u}),n=s}if(!(this instanceof xe))return new xe(t,e,n).getResult();var r=typeof t===In?t:n&&n[zs]?n[zs]:le&&le.userAgent?le.userAgent:Je,i=new Lr(n,!0),o=e?th(Hs,e):Hs,a=function(u){return u==qe?function(){return new Ks(u,r,o,i).set("ua",r).set(ce,this.getBrowser()).set(Se,this.getCPU()).set(we,this.getDevice()).set(me,this.getEngine()).set(fe,this.getOS()).get()}:function(){return new Ks(u,r,o[u],i).parseUA().get()}};return ke.call(this,[["getBrowser",a(ce)],["getCPU",a(Se)],["getDevice",a(we)],["getEngine",a(me)],["getOS",a(fe)],["getResult",a(qe)],["getUA",function(){return r}],["setUA",function(u){return Qe(u)&&(r=u.length>En?Wt(u,En):u),this}]]).setUA(r),this}xe.VERSION=Hl;xe.BROWSER=en([S,A,yt,b]);xe.CPU=en([ue]);xe.DEVICE=en([x,_,b,lt,z,X,F,be,ht]);xe.ENGINE=xe.OS=en([S,A]);const rh=xe(navigator.userAgent);class ih extends he{constructor(e,n,s){super(),this.appStorage=e,this.fetchService=n,this.analyticsService=s}get colorTheme(){return this.appStorage.state.colorTheme}get version(){return M.runtime.getManifest().version}get showOnboarding(){return this.appStorage.state.showOnboarding}get sessionCount(){return this.appStorage.state.sessionCount}get downloadNotificationTimestamp(){return this.appStorage.state.downloadNotificationTimestamp}get geolocation(){return this.appStorage.state.geolocation??null}get isBlockAds(){return this.appStorage.state.blockAds}get majorBrowserVersion(){const e=Number(rh.browser.major);return Number.isNaN(e)?0:e}get rateUsData(){return this.appStorage.state.rateUs}get extensionStoreUrl(){const e=M.runtime.id;return $l.replace("_runtime_id_",e)}get needShowConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state,n=Date.now()>e.nextTimestamp;return e.active&&n}get connectionSurveyClose(){return this.appStorage.state.connectionSurvey.close}async boot(){await this.appStorage.sync(),this.appStorage.state.geolocation||await this.detectGeolocation(),this.bootResolve(),await this.bootPromise}async setColorTheme(e){await this.appStorage.setItems({colorTheme:e})}async setShowOnboarding(e){await this.appStorage.setItems({showOnboarding:e})}async incrementSessionCount(){const e=this.appStorage.state.sessionCount+1;await this.appStorage.setItems({sessionCount:e})}async getDownloadLink(e){return await Promise.resolve(this),Al[e]}async incrementDownloadNotificationTimestamp(){const e=Date.now()+kl;await this.appStorage.setItems({downloadNotificationTimestamp:e})}async detectGeolocation(){const e=await this.fetchService.request({method:"GET",url:Cl});if(e.success)try{const n=e.data.trim().split(/\n/).map(i=>i.split("=")),s=Object.fromEntries(n),r={country:s.loc.toLocaleLowerCase(),region:s.colo.toLocaleLowerCase()};await this.appStorage.setItems({geolocation:r}),this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"setup_user_country",data:{user_country:r.country}})}catch{this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"country_check_failed_error"})}else this.analyticsService.sendEvent({types:["google-analytics","amplitude"],name:"country_check_failed"})}async setBlockAds(e){await this.appStorage.setItems({blockAds:e})}async incrementRateUs(){const e={needShow:this.rateUsData.showCount<Ol,nextTimestamp:Date.now()+Il,showCount:this.rateUsData.showCount+1};await this.appStorage.setItems({rateUs:e})}async setExitOfferShown(){await this.appStorage.setItems({exitOffer:{needShow:!1}})}async incrementConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state;await this.appStorage.setItems({connectionSurvey:{...e,nextTimestamp:Date.now()+Pl}})}async closeConnectionSurvey(){const{close:e}=this.appStorage.state.connectionSurvey,n=e.count+1,s=e.nextTimestamp<Date.now()&&n%2===0,r=s?Date.now()+zl:e.nextTimestamp,i={needShow:s,count:n,nextTimestamp:r};await this.appStorage.setItems({connectionSurvey:{...this.appStorage.state.connectionSurvey,close:i}})}async delayConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state;await this.appStorage.setItems({connectionSurvey:{...e,nextTimestamp:Date.now()+Rl}})}async disableConnectionSurvey(){const{connectionSurvey:e}=this.appStorage.state;await this.appStorage.setItems({connectionSurvey:{...e,active:!1}})}get banner2Session(){const{banner2Session:e}=this.appStorage.state;return e}async disableBanner2Session(){await this.appStorage.setItems({banner2Session:{active:!1}})}get banner3Connection(){const{banner3Connection:e}=this.appStorage.state;return e}async disableBanner3Connection(){await this.appStorage.setItems({banner3Connection:{active:!1}})}get banner15Connection(){const{banner15Connection:e}=this.appStorage.state;return e}async disableBanner15Connection(){await this.appStorage.setItems({banner15Connection:{active:!1}})}get banner14Days(){const{banner14Days:e}=this.appStorage.state;return e}async activateBanner14Days(){await this.appStorage.setItems({banner14Days:{...this.banner14Days,active:!0}})}async disableBanner14Days(){await this.appStorage.setItems({banner14Days:{nextTimestamp:Date.now()+Pr,active:!1}})}get banner16Days(){const{banner16Days:e}=this.appStorage.state;return e}async disableBanner16Days(){await this.appStorage.setItems({banner16Days:{...this.banner16Days,active:!1}})}}const oh=new ie("app",Wl,oe),td=new ih(oh,Yt,Xt),ah=["allowed","denied"],ch="allowed",uh="/icons/128.png",lh=["download-app","extension-updated"],hh=N({id:U().uuid(),callback:K(lh).optional()}),dh=N({permition:K(ah).optional().describe(L.persist),callbacks:Le(hh).optional().describe(L.session)}).default({}),ph=new ge(dh);class fh extends he{constructor(e){super(),this.notificationStorage=e}get permition(){return this.notificationStorage.state.permition??ch}get callbacks(){return this.notificationStorage.state.callbacks??[]}async boot(){await this.notificationStorage.sync(),this.bootResolve(),await this.bootPromise}async setNotificationPermition(e){await this.notificationStorage.setItems({permition:e})}getCallbackSettings(e){return this.callbacks.find(s=>s.id===e)??null}async removeCallbackSettings(e){const s=((await this.notificationStorage.getItems("callbacks")).callbacks??[]).filter(r=>r.id!==e);await this.notificationStorage.setItems({callbacks:s})}async notify(e){if(this.notificationStorage.state.permition==="denied")return;const n=M.runtime.getManifest(),s=M.runtime.getURL(uh),r={type:"basic",title:n.name,message:n.description??"",iconUrl:s},i=await M.notifications.create(crypto.randomUUID(),{...r,...e.options}),o=[...this.callbacks,{id:i,...e.callback?{callback:e.callback}:{}}];await this.notificationStorage.setItems({callbacks:o})}}const gh=new ie("notification",ph,oe),nd=new fh(gh),Pn=["free","premium"],mh=["available","unavailable"],bh=N({accessToken:U(),refreshToken:U()}),qs=N({type:K(Pn),url:U(),status:K(mh),updatedAt:$()}),vh=N({tokens:bh.optional().describe(L.persist),[Pn[0]]:qs.optional().describe(L.persist),[Pn[1]]:qs.optional().describe(L.persist)}).default({}),wh=new ge(vh),Ht={authRefreshToken:"/auth/refresh-token/",authLogin:"/auth/login/",authLogout:"/auth/logout/",apiLaunch:"/api/launch/",apiLocationList:"/api/location/list/",apiServerList:"/api/server/list/",apiAvailable:"/api/available/",apiAccountAuthToken:"/api/account/account-auth-token/",apiUrlReview:"/api/url/review/",apiSubscriptionCheckUsedTrial:"/api/v2/subscription/check-used-trial/",apiSubscriptionSlot:"/api/v2/subscription/slot/",apiSlotRelease:"/api/v2/slot/release/",apiSubscriptionShield:"/api/v2/subscription/shield/"},yh="https://antpeak.com",xh="https://zorvian.com",Gs="https://s3-oregon-1.s3-us-west-2.amazonaws.com/api.json",_h=1*60*60*1e3,Js=xe(navigator.userAgent);class tn extends he{constructor(n,s,r,i,o,a){super();Z(this,"domainType");Z(this,"domainUrl");this.apiStorage=r,this.globalStateService=i,this.fetchService=o,this.analyticsService=a,this.domainType=n,this.domainUrl=s}get hasTokens(){return!!this.apiStorage.state.tokens}get deviceInfo(){const n="chrome",s=M.runtime.getManifest(),r=Js.browser.name??"Chrome",i=Js.browser.version??"0.0.0";return{udid:this.globalStateService.udid.value,appVersion:s.version,platform:n,platformVersion:navigator.userAgent,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,deviceName:`${r} ${i}`}}get isDomainAvailable(){const n=this.apiStorage.state[this.domainType];if(!n)return!1;const s=n.updatedAt+_h;return!!n.url&&n.status==="available"&&s>Date.now()}get apiDomainUrl(){const n=this.apiStorage.state[this.domainType];return(n==null?void 0:n.url)||this.domainUrl}async boot(){await this.apiStorage.sync(),this.isDomainAvailable||await this.updateDomainData(),this.bootResolve(),await this.bootPromise}async setTokens(n){await this.apiStorage.setItems({tokens:n})}async removeTokens(){await this.apiStorage.removeItems("tokens")}async updateDomainData(){if(await this.apiGetDomainStatus(this.domainUrl)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:this.domainUrl,status:"available",updatedAt:Date.now()}});return}const s=await this.apiGetReserveDomains();if(s.success){const r=tn.shuffleArray(s.data.domains[this.domainType]);for(const i of r)if(await this.apiGetDomainStatus(i,!0)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:i,status:"available",updatedAt:Date.now()}});return}}await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:"",status:"unavailable",updatedAt:0}})}async fetch(n){var i;if(!this.isDomainAvailable)return{success:!1,errors:[{code:0,status:0,name:"",message:"Connection Error. Api domain is unavailable. Try to reset app."}]};const s=((i=this.apiStorage.state[this.domainType])==null?void 0:i.url)+Ht[n.url];return await this.request({...n,url:s})}async apiGetReserveDomains(){const n=await this.fetchService.request({method:"GET",url:Gs});return n.success||this.analyticsService.sendEvent({types:["google-analytics"],name:"api_no_response_bucket",data:{api_domain:Gs,status_code:wt.getStatusCodeMessage(n)}}),n}async apiGetDomainStatus(n,s=!1){const r=await this.fetchService.request({method:"GET",url:`${n}${Ht.apiAvailable}`});return r.success||this.analyticsService.sendEvent({types:["google-analytics"],name:s?"api_no_response_reserve":"api_no_response_default",data:{api_domain:n,status_code:wt.getStatusCodeMessage(r)}}),r.success?r.data.message==="OK":!1}static shuffleArray(n){const s=[...n];for(let r=s.length-1;r>=0;r--){const i=Math.floor(Math.random()*(r+1));[s[r],s[i]]=[s[i],s[r]]}return s}}class Sh extends tn{constructor(e,n,s,r,i,o,a){super(e,n,s,r,i,a),this.apiStorage=s,this.globalStateService=r,this.fetchService=i,this.eventService=o,this.analyticsService=a}async request(e){var a,u;const n=((a=this.apiStorage.state.tokens)==null?void 0:a.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${n}`,...e.headers}});if(s.success||s.errors.every(l=>l.status!==401))return s;const i=((u=this.apiStorage.state.tokens)==null?void 0:u.accessToken)??"",o=await this.fetchService.request({headers:{Authorization:`Bearer ${i}`},method:"POST",url:this.apiDomainUrl+Ht.apiLaunch,body:this.deviceInfo});return o.success?(await this.setTokens({accessToken:o.data.accessToken,refreshToken:""}),this.request(e)):(this.eventService.dispatch({"free-refresh-token-failed":{disconnectReason:i?this.apiDomainUrl:"token_empty",failedReason:wt.getStatusCodeMessage(o)}}),s)}}class Ah extends tn{constructor(e,n,s,r,i,o,a){super(e,n,s,r,i,a),this.apiStorage=s,this.globalStateService=r,this.fetchService=i,this.eventService=o,this.analyticsService=a}async request(e){var a,u;const n=((a=this.apiStorage.state.tokens)==null?void 0:a.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${n}`,...e.headers}});if(s.success||s.errors.every(l=>l.status!==401))return s;const i=((u=this.apiStorage.state.tokens)==null?void 0:u.refreshToken)??"",o=await this.fetchService.request({headers:{Authorization:`Bearer ${i}`},method:"POST",url:this.apiDomainUrl+Ht.authRefreshToken,body:this.deviceInfo});return o.success?(await this.setTokens({accessToken:o.data.accessToken,refreshToken:o.data.refreshToken}),this.request(e)):(this.eventService.dispatch({"premium-refresh-token-failed":{disconnectReason:i?this.apiDomainUrl:"token_empty",failedReason:wt.getStatusCodeMessage(o)}}),s)}}const Dr=new ie("api",wh,oe),sd=new Sh("free",yh,Dr,Jt,Yt,oe,Xt),rd=new Ah("premium",xh,Dr,Jt,Yt,oe,Xt),kh=N({blockWebrtc:ee().optional().describe(L.persist)}).default({}),Ch=new ge(kh),xn="disable_non_proxied_udp",Ke=class Ke extends he{constructor(n){super();Z(this,"setting",M.privacy.network.webRTCIPHandlingPolicy);Z(this,"details",{levelOfControl:"not_controllable",value:"default"});this.webrtcStorage=n,this.setting.onChange.addListener(s=>{this.details=s,Ke.settingChangeResolver()})}get canControlWebrtc(){const{levelOfControl:n,value:s}=this.details;return n==="not_controllable"||n==="controlled_by_other_extensions"?{status:!1,cause:n}:n==="controllable_by_this_extension"&&s===xn?{status:!1,cause:"controlled_by_other_extensions"}:{status:!0}}get isApplied(){const{levelOfControl:n,value:s}=this.details;return n==="controlled_by_this_extension"&&s===xn}get needEnableWebrtc(){return!!this.webrtcStorage.state.blockWebrtc}async boot(){await this.webrtcStorage.sync(),this.details=await this.setting.get({}),this.bootResolve(),await this.bootPromise}async enable(){if(!this.canControlWebrtc.status)return this.canControlWebrtc;const n=new Promise(s=>{Ke.settingChangeResolver=s});return await this.setting.set({value:xn,scope:"regular"}),await n,this.canControlWebrtc}async disable(){if(!this.canControlWebrtc.status)return this.canControlWebrtc;const n=new Promise(s=>{Ke.settingChangeResolver=s});return await this.setting.clear({}),await n,this.canControlWebrtc}async setBlockWebrtc(n){await this.webrtcStorage.setItems({blockWebrtc:n})}};Z(Ke,"settingChangeResolver",()=>{});let Rn=Ke;const Eh=new ie("webrtc-settings",Ch,oe),id=new Rn(Eh),Ih=["udp","tcp","ipsec","https","http","sws","wg"],Oh=N({addresses:Le(U()),protocol:K(Ih),port:$()}),$h=N({username:U(),password:U()}),Ph=N({credentials:$h.optional().describe(L.persist),serverConfigList:Le(Oh).optional().describe(L.persist)}).default({}),Rh=new ge(Ph),Me=class Me extends he{constructor(n){super();Z(this,"setting",M.proxy.settings);Z(this,"details",{levelOfControl:"not_controllable",value:{mode:"system"}});this.proxyStorage=n,this.setting.onChange.addListener(s=>{this.details=s,Me.settingChangeResolver()})}get canControlProxy(){const{levelOfControl:n}=this.details;return n==="not_controllable"||n==="controlled_by_other_extensions"?{status:!1,cause:n}:{status:!0}}get isApplied(){const{levelOfControl:n}=this.details;return n==="controlled_by_this_extension"}async getAuthCredentials(){const{credentials:n}=await this.proxyStorage.getItems("credentials");return n??null}async getServerConfigList(){const{serverConfigList:n}=await this.proxyStorage.getItems("serverConfigList");return n??[]}async boot(){await this.proxyStorage.sync();const n=await this.setting.get({});this.details=n,this.bootResolve(),await this.bootPromise}async enable(n){if(this.isApplied)return this.canControlProxy;if(!this.canControlProxy.status)return this.canControlProxy;await this.proxyStorage.setItems({credentials:n.credentials,serverConfigList:n.serverConfig});const s=new Promise(i=>{Me.settingChangeResolver=i}),r=Me.createProxyConfig(n);return await this.setting.set({value:r,scope:"regular"}),await s,this.canControlProxy}async disable(){if(!this.isApplied)return!0;await this.proxyStorage.removeItems("credentials","serverConfigList");const n=new Promise(s=>{Me.settingChangeResolver=s});return await this.setting.clear({}),await n,!this.isApplied}static createProxyConfig(n){const s=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,r=n.serverConfig.flatMap(o=>{const a=o.protocol.toUpperCase();return o.addresses.map(u=>`${a} ${u}:${o.port}`)}).join("; ");return{mode:"pac_script",pacScript:{data:`
      function FindProxyForURL(url, host) {
        const areHostnamesEqual = (hostnameA, hostnameB) => {
          const wwwRegex = /^www\\./;
          const oldHostnameWithoutWww = hostnameA.replace(wwwRegex, '');
          const newHostnameWithoutWww = hostnameB.replace(wwwRegex, '');
          return oldHostnameWithoutWww === newHostnameWithoutWww;
        };

        if (isPlainHostName(host)) {
          return 'DIRECT';
        }

        const ipv4Regex = new RegExp(${s});
        const nonRoutableNets = ${JSON.stringify(n.nonRoutableNets)};
        if (ipv4Regex.test(host) && nonRoutableNets.some(([pattern, mask]) => isInNet(host, pattern, mask))) {
          return 'DIRECT';
        }

        const exclusions = ${JSON.stringify(n.exclusionList)};
        if (exclusions.some(el => (areHostnamesEqual(host, el) || shExpMatch(host, el)))) {
          return 'DIRECT';
        }

        return '${r}';
      }`}}}async getControlProxyStatus(){return Promise.resolve(this.canControlProxy)}};Z(Me,"settingChangeResolver",()=>{});let zn=Me;const zh=new ie("proxy",Rh,oe),od=new zn(zh),Lh=N({matchPattern:U(),favicon:U().optional()}),Dh=N({exclusions:Lh.array().optional().describe(L.persist)}).default({}),Th=new ge(Dh);var Dt={exports:{}},Nh=Dt.exports,Ys;function jh(){return Ys||(Ys=1,function(t){(function(e){const n="(0?\\d+|0x[a-f0-9]+)",s={fourOctet:new RegExp(`^${n}\\.${n}\\.${n}\\.${n}$`,"i"),threeOctet:new RegExp(`^${n}\\.${n}\\.${n}$`,"i"),twoOctet:new RegExp(`^${n}\\.${n}$`,"i"),longValue:new RegExp(`^${n}$`,"i")},r=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${n}\\.${n}\\.${n}\\.${n}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${n}\\.${n}\\.${n}\\.${n}(${o})?$`,"i")};function l(c,h){if(c.indexOf("::")!==c.lastIndexOf("::"))return null;let m=0,f=-1,w=(c.match(u.zoneIndex)||[])[0],y,I;for(w&&(w=w.substring(1),c=c.replace(/%.+$/,""));(f=c.indexOf(":",f+1))>=0;)m++;if(c.substr(0,2)==="::"&&m--,c.substr(-2,2)==="::"&&m--,m>h)return null;for(I=h-m,y=":";I--;)y+="0:";return c=c.replace("::",y),c[0]===":"&&(c=c.slice(1)),c[c.length-1]===":"&&(c=c.slice(0,-1)),h=function(){const G=c.split(":"),E=[];for(let C=0;C<G.length;C++)E.push(parseInt(G[C],16));return E}(),{parts:h,zoneId:w}}function g(c,h,m,f){if(c.length!==h.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let w=0,y;for(;f>0;){if(y=m-f,y<0&&(y=0),c[w]>>y!==h[w]>>y)return!1;f-=m,w+=1}return!0}function d(c){if(i.test(c))return parseInt(c,16);if(c[0]==="0"&&!isNaN(parseInt(c[1],10))){if(r.test(c))return parseInt(c,8);throw new Error(`ipaddr: cannot parse ${c} as octal`)}return parseInt(c,10)}function k(c,h){for(;c.length<h;)c=`0${c}`;return c}const p={};p.IPv4=function(){function c(h){if(h.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,f;for(m=0;m<h.length;m++)if(f=h[m],!(0<=f&&f<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=h}return c.prototype.SpecialRanges={unspecified:[[new c([0,0,0,0]),8]],broadcast:[[new c([255,255,255,255]),32]],multicast:[[new c([224,0,0,0]),4]],linkLocal:[[new c([169,254,0,0]),16]],loopback:[[new c([127,0,0,0]),8]],carrierGradeNat:[[new c([100,64,0,0]),10]],private:[[new c([10,0,0,0]),8],[new c([172,16,0,0]),12],[new c([192,168,0,0]),16]],reserved:[[new c([192,0,0,0]),24],[new c([192,0,2,0]),24],[new c([192,88,99,0]),24],[new c([198,18,0,0]),15],[new c([198,51,100,0]),24],[new c([203,0,113,0]),24],[new c([240,0,0,0]),4]],as112:[[new c([192,175,48,0]),24],[new c([192,31,196,0]),24]],amt:[[new c([192,52,193,0]),24]]},c.prototype.kind=function(){return"ipv4"},c.prototype.match=function(h,m){let f;if(m===void 0&&(f=h,h=f[0],m=f[1]),h.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return g(this.octets,h.octets,8,m)},c.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1;const f={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let w,y,I;for(w=3;w>=0;w-=1)if(y=this.octets[w],y in f){if(I=f[y],m&&I!==0)return null;I!==8&&(m=!0),h+=I}else return null;return 32-h},c.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},c.prototype.toByteArray=function(){return this.octets.slice(0)},c.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},c.prototype.toNormalizedString=function(){return this.toString()},c.prototype.toString=function(){return this.octets.join(".")},c}(),p.IPv4.broadcastAddressFromCIDR=function(c){try{const h=this.parseCIDR(c),m=h[0].toByteArray(),f=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),w=[];let y=0;for(;y<4;)w.push(parseInt(m[y],10)|parseInt(f[y],10)^255),y++;return new this(w)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(c){return this.parser(c)!==null},p.IPv4.isValid=function(c){try{return new this(this.parser(c)),!0}catch{return!1}},p.IPv4.isValidCIDR=function(c){try{return this.parseCIDR(c),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(c){return!!(p.IPv4.isValid(c)&&c.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(c){let h,m,f,w,y;try{for(h=this.parseCIDR(c),f=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),w=[],m=0;m<4;)w.push(parseInt(f[m],10)&parseInt(y[m],10)),m++;return new this(w)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(c){const h=this.parser(c);if(h===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(h)},p.IPv4.parseCIDR=function(c){let h;if(h=c.match(/^(.+)\/(\d+)$/)){const m=parseInt(h[2]);if(m>=0&&m<=32){const f=[this.parse(h[1]),m];return Object.defineProperty(f,"toString",{value:function(){return this.join("/")}}),f}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(c){let h,m,f;if(h=c.match(s.fourOctet))return function(){const w=h.slice(1,6),y=[];for(let I=0;I<w.length;I++)m=w[I],y.push(d(m));return y}();if(h=c.match(s.longValue)){if(f=d(h[1]),f>4294967295||f<0)throw new Error("ipaddr: address outside defined range");return function(){const w=[];let y;for(y=0;y<=24;y+=8)w.push(f>>y&255);return w}().reverse()}else return(h=c.match(s.twoOctet))?function(){const w=h.slice(1,4),y=[];if(f=d(w[1]),f>16777215||f<0)throw new Error("ipaddr: address outside defined range");return y.push(d(w[0])),y.push(f>>16&255),y.push(f>>8&255),y.push(f&255),y}():(h=c.match(s.threeOctet))?function(){const w=h.slice(1,5),y=[];if(f=d(w[2]),f>65535||f<0)throw new Error("ipaddr: address outside defined range");return y.push(d(w[0])),y.push(d(w[1])),y.push(f>>8&255),y.push(f&255),y}():null},p.IPv4.subnetMaskFromPrefixLength=function(c){if(c=parseInt(c),c<0||c>32)throw new Error("ipaddr: invalid IPv4 prefix length");const h=[0,0,0,0];let m=0;const f=Math.floor(c/8);for(;m<f;)h[m]=255,m++;return f<4&&(h[f]=Math.pow(2,c%8)-1<<8-c%8),new this(h)},p.IPv6=function(){function c(h,m){let f,w;if(h.length===16)for(this.parts=[],f=0;f<=14;f+=2)this.parts.push(h[f]<<8|h[f+1]);else if(h.length===8)this.parts=h;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(f=0;f<this.parts.length;f++)if(w=this.parts[f],!(0<=w&&w<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return c.prototype.SpecialRanges={unspecified:[new c([0,0,0,0,0,0,0,0]),128],linkLocal:[new c([65152,0,0,0,0,0,0,0]),10],multicast:[new c([65280,0,0,0,0,0,0,0]),8],loopback:[new c([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new c([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new c([0,0,0,0,0,65535,0,0]),96],discard:[new c([256,0,0,0,0,0,0,0]),64],rfc6145:[new c([0,0,0,0,65535,0,0,0]),96],rfc6052:[new c([100,65435,0,0,0,0,0,0]),96],"6to4":[new c([8194,0,0,0,0,0,0,0]),16],teredo:[new c([8193,0,0,0,0,0,0,0]),32],benchmarking:[new c([8193,2,0,0,0,0,0,0]),48],amt:[new c([8193,3,0,0,0,0,0,0]),32],as112v6:[[new c([8193,4,274,0,0,0,0,0]),48],[new c([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new c([8193,16,0,0,0,0,0,0]),28],orchid2:[new c([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new c([8193,48,0,0,0,0,0,0]),28],reserved:[[new c([8193,0,0,0,0,0,0,0]),23],[new c([8193,3512,0,0,0,0,0,0]),32]]},c.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},c.prototype.kind=function(){return"ipv6"},c.prototype.match=function(h,m){let f;if(m===void 0&&(f=h,h=f[0],m=f[1]),h.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return g(this.parts,h.parts,16,m)},c.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1;const f={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let w,y;for(let I=7;I>=0;I-=1)if(w=this.parts[I],w in f){if(y=f[w],m&&y!==0)return null;y!==16&&(m=!0),h+=y}else return null;return 128-h},c.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},c.prototype.toByteArray=function(){let h;const m=[],f=this.parts;for(let w=0;w<f.length;w++)h=f[w],m.push(h>>8),m.push(h&255);return m},c.prototype.toFixedLengthString=function(){const h=(function(){const f=[];for(let w=0;w<this.parts.length;w++)f.push(k(this.parts[w].toString(16),4));return f}).call(this).join(":");let m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},c.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const h=this.parts.slice(-2),m=h[0],f=h[1];return new p.IPv4([m>>8,m&255,f>>8,f&255])},c.prototype.toNormalizedString=function(){const h=(function(){const f=[];for(let w=0;w<this.parts.length;w++)f.push(this.parts[w].toString(16));return f}).call(this).join(":");let m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},c.prototype.toRFC5952String=function(){const h=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString();let f=0,w=-1,y;for(;y=h.exec(m);)y[0].length>w&&(f=y.index,w=y[0].length);return w<0?m:`${m.substring(0,f)}::${m.substring(f+w)}`},c.prototype.toString=function(){return this.toRFC5952String()},c}(),p.IPv6.broadcastAddressFromCIDR=function(c){try{const h=this.parseCIDR(c),m=h[0].toByteArray(),f=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),w=[];let y=0;for(;y<16;)w.push(parseInt(m[y],10)|parseInt(f[y],10)^255),y++;return new this(w)}catch(h){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${h})`)}},p.IPv6.isIPv6=function(c){return this.parser(c)!==null},p.IPv6.isValid=function(c){if(typeof c=="string"&&c.indexOf(":")===-1)return!1;try{const h=this.parser(c);return new this(h.parts,h.zoneId),!0}catch{return!1}},p.IPv6.isValidCIDR=function(c){if(typeof c=="string"&&c.indexOf(":")===-1)return!1;try{return this.parseCIDR(c),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(c){let h,m,f,w,y;try{for(h=this.parseCIDR(c),f=h[0].toByteArray(),y=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),w=[],m=0;m<16;)w.push(parseInt(f[m],10)&parseInt(y[m],10)),m++;return new this(w)}catch(I){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${I})`)}},p.IPv6.parse=function(c){const h=this.parser(c);if(h.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(h.parts,h.zoneId)},p.IPv6.parseCIDR=function(c){let h,m,f;if((m=c.match(/^(.+)\/(\d+)$/))&&(h=parseInt(m[2]),h>=0&&h<=128))return f=[this.parse(m[1]),h],Object.defineProperty(f,"toString",{value:function(){return this.join("/")}}),f;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(c){let h,m,f,w,y,I;if(f=c.match(u.deprecatedTransitional))return this.parser(`::ffff:${f[1]}`);if(u.native.test(c))return l(c,8);if((f=c.match(u.transitional))&&(I=f[6]||"",h=f[1],f[1].endsWith("::")||(h=h.slice(0,-1)),h=l(h+I,6),h.parts)){for(y=[parseInt(f[2]),parseInt(f[3]),parseInt(f[4]),parseInt(f[5])],m=0;m<y.length;m++)if(w=y[m],!(0<=w&&w<=255))return null;return h.parts.push(y[0]<<8|y[1]),h.parts.push(y[2]<<8|y[3]),{parts:h.parts,zoneId:h.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(c){if(c=parseInt(c),c<0||c>128)throw new Error("ipaddr: invalid IPv6 prefix length");const h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let m=0;const f=Math.floor(c/8);for(;m<f;)h[m]=255,m++;return f<16&&(h[f]=Math.pow(2,c%8)-1<<8-c%8),new this(h)},p.fromByteArray=function(c){const h=c.length;if(h===4)return new p.IPv4(c);if(h===16)return new p.IPv6(c);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(c){return p.IPv6.isValid(c)||p.IPv4.isValid(c)},p.isValidCIDR=function(c){return p.IPv6.isValidCIDR(c)||p.IPv4.isValidCIDR(c)},p.parse=function(c){if(p.IPv6.isValid(c))return p.IPv6.parse(c);if(p.IPv4.isValid(c))return p.IPv4.parse(c);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(c){try{return p.IPv6.parseCIDR(c)}catch{try{return p.IPv4.parseCIDR(c)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(c){const h=this.parse(c);return h.kind()==="ipv6"&&h.isIPv4MappedAddress()?h.toIPv4Address():h},p.subnetMatch=function(c,h,m){let f,w,y,I;m==null&&(m="unicast");for(w in h)if(Object.prototype.hasOwnProperty.call(h,w)){for(y=h[w],y[0]&&!(y[0]instanceof Array)&&(y=[y]),f=0;f<y.length;f++)if(I=y[f],c.kind()===I[0].kind()&&c.match.apply(c,I))return w}return m},t.exports?t.exports=p:e.ipaddr=p})(Nh)}(Dt)),Dt.exports}var Zh=jh();const Xs=Qs(Zh);class Mh extends he{constructor(n){super();Z(this,"NON_ROUTABLE_IP_ADDRESS",["0.0.0.0/8","10.0.0.0/8","14.0.0.0/8","24.0.0.0/8","39.0.0.0/8","127.0.0.0/8","128.0.0.0/16","169.254.0.0/16","172.16.0.0/12","191.255.0.0/16","192.0.0.0/24","192.0.2.0/24","192.88.99.0/24","192.168.0.0/16","198.18.0.0/15","223.255.255.0/24","224.0.0.0/4","240.0.0.0/4"]);Z(this,"DEFAULT_EXCLUSIONS",["::1","localhost","*.local","127.0.0.1","analytics.google.com","*.analytics.google.com","google-analytics.com","*.google-analytics.com"]);this.exclusionsStorage=n}get nonRoutableNets(){const n=s=>{const[r,i]=Xs.parseCIDR(s);return[r.toString(),Xs.IPv4.subnetMaskFromPrefixLength(i).toString()]};return this.NON_ROUTABLE_IP_ADDRESS.map(n)}get exclusionList(){const n=this.exclusionSites.map(s=>s.matchPattern);return[...this.DEFAULT_EXCLUSIONS,...n]}get nonRoutableList(){return[...this.NON_ROUTABLE_IP_ADDRESS]}get exclusionSites(){return this.exclusionsStorage.state.exclusions??[]}async boot(){await this.exclusionsStorage.sync(),this.bootResolve(),await this.bootPromise}async add(n){await this.exclusionsStorage.setItems({exclusions:[...this.exclusionSites,n]})}async remove(n){const s=this.exclusionSites.filter(r=>r.matchPattern!==n.matchPattern);await this.exclusionsStorage.setItems({exclusions:s})}}const Fh=new ie("exclusions",Th,oe),ad=new Mh(Fh),Uh=["disconnected","connecting","connected","disconnecting"],Vh="disconnected",Bh=N({status:K(Uh).optional().describe(L.persist),ipAddress:U().optional().describe(L.session),connectionCount:$().describe(L.persist),useAutoConnect:ee().optional().describe(L.persist)}).default({connectionCount:0}),Wh=new ge(Bh);class Hh extends he{constructor(e){super(),this.connectionStorage=e}get currentIp(){return this.connectionStorage.state.ipAddress}get status(){return this.connectionStorage.state.status??Vh}get isConnected(){return this.connectionStorage.state.status==="connected"}get connectionCount(){return this.connectionStorage.state.connectionCount}get useAutoConnect(){return!!this.connectionStorage.state.useAutoConnect}async boot(){await this.connectionStorage.sync(),this.bootResolve(),await this.bootPromise}async setIpAddress(e){await this.connectionStorage.setItems({ipAddress:e})}async removeIpAddress(){await this.connectionStorage.removeItems("ipAddress")}async setConnectionStatus(e){await this.connectionStorage.setItems({status:e})}async incrementConnectionCount(){const e=this.connectionStorage.state.connectionCount+1;await this.connectionStorage.setItems({connectionCount:e})}async setAutoConnect(e){await this.connectionStorage.setItems({useAutoConnect:e})}}const Kh=new ie("connection",Wh,oe),cd=new Hh(Kh);export{Yh as A,jc as B,Sr as C,zt as D,_e as E,ee as F,Le as G,Qs as H,$r as I,jn as J,Oe as K,Cr as L,ch as M,Jh as N,wt as O,he as S,xe as U,K as _,ne as a,M as b,Xt as c,ed as d,td as e,fl as f,Jt as g,sd as h,cs as i,rd as j,ad as k,Xh as l,Gh as m,nd as n,oe as o,od as p,cd as q,N as r,U as s,L as t,Qh as u,ge as v,id as w,ie as x,Yt as y,$ as z};

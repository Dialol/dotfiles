const n="content",s=["csv","tsv"];function c(){const e=document.querySelector("#xcv-reader-data");e&&e.remove(),document.body.classList.remove("xcv-reader-done")}chrome.runtime.onMessage.addListener((e,a,d)=>{if(e.command==="is-page-xsv-compatible"){let t=document.location.href;const o=(t=t.substring(1+t.lastIndexOf("/")).split("?")[0]).split("#")[0].substring(1+t.lastIndexOf(".")),r=s.includes(o.toLowerCase());console.log(n,{ext:o,isCompatible:r}),d({ext:o,isCompatible:r})}else if(e.command==="get-page-content"){c(),console.log(n,e);const t=document.body.textContent;d(t)}else if(e.command==="reset-page")c();else if(e.command==="render-result"){const{data:t}=e;console.log(n,e),c();const o=document.createElement("section");o.id="xcv-reader-data",o.innerHTML=t,document.body.appendChild(o),document.body.classList.add("xcv-reader-done")}});
